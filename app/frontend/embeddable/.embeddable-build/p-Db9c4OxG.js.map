{"version":3,"file":"p-Db9c4OxG.js","sources":["../embeddable-prepared-build/index-BFVObRBA-DzYNJLfT.js"],"sourcesContent":["import { j as l } from \"./jsx-runtime-CjQXaSqQ-D76WfN4z.js\";\nimport { a as S } from \"./index.esm-DX0c4CGG.js\";\nimport { r as o } from \"./embeddable-entry-point-T_8lzRC9.js\";\nimport { _ as $, $ as V } from \"./Spinner-BeNoTciJ-Dz8NAkFL.js\";\nimport { W as z, X as W, V as P } from \"./Container-DH8gzj0m-BFp6GpAn.js\";\nlet x;\nconst _ = (r) => {\n  const v = o.useRef(null), [m, s] = o.useState(!1), [g, c] = o.useState(!1), [w, y] = o.useState(\"\"), [k, a] = o.useState(!1), [n, p] = o.useState(r.defaultValue), [B, j] = S({\n    [r.searchProperty || \"search\"]: \"\"\n  });\n  o.useEffect(() => {\n    p(r.defaultValue);\n  }, [r.defaultValue]), o.useEffect(() => {\n    let e = null;\n    return g ? e && clearTimeout(e) : e = setTimeout(() => {\n      s(!1);\n    }, 200), () => {\n      e && clearTimeout(e);\n    };\n  }, [g]), o.useLayoutEffect(() => {\n    if (!k) return;\n    const e = setTimeout(() => {\n      s(!1), a(!1);\n    }, 500);\n    return () => clearTimeout(e);\n  }, [k]);\n  const b = o.useCallback(\n    (e) => {\n      y(e), clearTimeout(x), x = window.setTimeout(() => {\n        j((t) => ({ ...t, [r.searchProperty || \"search\"]: e }));\n      }, 500);\n    },\n    [y, j, r.searchProperty]\n  ), d = o.useCallback(\n    (e) => {\n      b(\"\"), p(e), r.onChange(e), clearTimeout(x);\n    },\n    [p, r, b]\n  ), D = (e, t, h) => {\n    (e.key === \"Enter\" || e.key === \" \") && (e.preventDefault(), t(e), s(!1), a(!0)), e.key === \"Escape\" && (e.preventDefault(), s(!1), a(!0));\n  }, f = o.useMemo(\n    () => {\n      var e, t;\n      return (t = (e = r.options) == null ? void 0 : e.data) == null ? void 0 : t.reduce((h, u, E) => {\n        var N, C;\n        return h.push(\n          /* @__PURE__ */ l.jsxs(\n            \"div\",\n            {\n              onClick: () => {\n                var i;\n                s(!1), a(!0), d(u[((i = r.property) == null ? void 0 : i.name) || \"\"] || \"\");\n              },\n              onKeyDown: (i) => D(i, () => {\n                var T;\n                return d(u[((T = r.property) == null ? void 0 : T.name) || \"\"] || \"\");\n              }),\n              className: `flex items-center min-h-[36px] px-3 py-2 hover:bg-black/5 cursor-pointer font-normal ${n === u[((N = r.property) == null ? void 0 : N.name) || \"\"] ? \"bg-black/5\" : \"\"} whitespace-nowrap overflow-hidden text-ellipsis`,\n              tabIndex: 0,\n              children: [\n                u[((C = r.property) == null ? void 0 : C.name) || \"\"],\n                u.note && /* @__PURE__ */ l.jsx(\"span\", { className: \"font-normal ml-auto pl-3 text-xs opacity-70\", children: u.note })\n              ]\n            },\n            E\n          )\n        ), h;\n      }, []);\n    },\n    [r, n, d]\n  );\n  return /* @__PURE__ */ l.jsx(z, { title: r.title, children: /* @__PURE__ */ l.jsxs(\n    \"div\",\n    {\n      className: $(\n        `\n            border\n            flex\n            h-10\n            items-center\n            min-w-[50px]\n            relative\n            w-full\n            bg-[color:--embeddable-controls-backgrounds-colors-soft]\n            border-[color:--embeddable-controls-borders-colors-normal]\n            rounded-[--embeddable-controls-borders-radius]\n          `,\n        r.className\n      ),\n      children: [\n        /* @__PURE__ */ l.jsx(\n          \"input\",\n          {\n            ref: v,\n            value: w,\n            name: \"dropdown\",\n            placeholder: r.placeholder,\n            onClick: (e) => {\n              s(!0), a(!1);\n            },\n            onFocus: () => {\n              s(!0), a(!1), c(!0);\n            },\n            onBlur: () => {\n              c(!1);\n            },\n            onChange: (e) => b(e.target.value),\n            className: `\n            border-0\n            cursor-pointer\n            h-9\n            leading-9\n            outline-none\n            px-3\n            text-sm ${m || !n ? \"\" : \"opacity-0\"}\n            w-full\n            bg-[color:--embeddable-controls-backgrounds-colors-transparent]\n            rounded-[--embeddable-controls-borders-radius]\n          `\n          }\n        ),\n        !!n && /* @__PURE__ */ l.jsx(\n          \"span\",\n          {\n            className: `\n              absolute\n              block\n              h-8\n              leading-8\n              left-3\n              overflow-hidden\n              pointer-events-none\n              text-sm ${m ? \"hidden\" : \"\"}\n              top-1\n              truncate\n              w-[calc(100%-2.5rem)]\n              whitespace-nowrap\n              rounded-[--embeddable-controls-borders-radius]\n            `,\n            children: n\n          }\n        ),\n        m && /* @__PURE__ */ l.jsxs(\n          \"div\",\n          {\n            style: { minWidth: r.minDropdownWidth },\n            className: `\n              absolute\n              border\n              flex\n              flex-col\n              max-h-[400px]\n              overflow-x-hidden\n              overflow-y-auto\n              top-11\n              w-full\n              z-50\n              bg-[color:--embeddable-controls-backgrounds-colors-soft]\n              border-[color:--embeddable-controls-borders-colors-normal]\n              rounded-[--embeddable-controls-borders-radius]\n            `,\n            onMouseDown: (e) => {\n              var t;\n              e.preventDefault(), (t = v.current) == null || t.focus(), a(!1);\n            },\n            onFocus: () => {\n              c(!0);\n            },\n            onBlur: () => {\n              c(!1);\n            },\n            tabIndex: 0,\n            children: [\n              f,\n              (f == null ? void 0 : f.length) === 0 && !!w && /* @__PURE__ */ l.jsx(\"div\", { className: \"px-3 py-2 text-black/50 italic cursor-pointer\", children: \"No results\" })\n            ]\n          }\n        ),\n        r.options.isLoading ? /* @__PURE__ */ l.jsx(V, { show: !0, className: \"absolute right-2 top-2 z-1 pointer-events-none\" }) : /* @__PURE__ */ l.jsx(W, { className: \"absolute right-2 top-2.5 z-1 pointer-events-none\" }),\n        !r.unclearable && !!n && /* @__PURE__ */ l.jsx(\n          \"div\",\n          {\n            onClick: () => {\n              d(\"\");\n            },\n            className: \"absolute right-10 top-0 h-10 flex items-center z-10 cursor-pointer\",\n            children: /* @__PURE__ */ l.jsx(P, {})\n          }\n        )\n      ]\n    }\n  ) });\n};\nexport {\n  _ as G\n};\n//# sourceMappingURL=index-BFVObRBA-DzYNJLfT.js.map\n"],"names":["o","S","l","z","$","V","W","P"],"mappings":"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"}