import{D as e}from"./p-DZclBDBz.js";import{G as t,k as a}from"./p-CptBl6Le.js";import{S as r}from"./p-D-ZJqqO3.js";import{P as s}from"./p-BDmepEmC.js";import{R as i}from"./p-CawJ6rMd.js";import{W as l,V as o,B as n,w as p,Y as m,U as d,L as c,v as u,k as y,E as g,M as b,m as h,a as f}from"./p-CYoZIMuL.js";import"./p-DRQaGU8r.js";import{c as C}from"./p-BvW5kj19.js";import{r as x}from"./p-BIFnrNPV.js";import"./p-UGbmf8ph.js";import"./p-CBK12GNN.js";import"./p-sWS4yEkp.js";import"./p-BcYWNS4N.js";import"./p-DUIxdZrE.js";p.register(m,d,c,u,y,g,b,h,f);const v=e=>{var t;const n=a();l(n,"scatter");const p={...e,theme:n},{fillGaps:m}=i(p,"desc"),{results:d}=p,c=p.isTimeDimension?(t=d==null?void 0:d.data)==null?void 0:t.reduce(m,[]):d==null?void 0:d.data,u=w(p,c);return r.jsx(s,{...p,className:"overflow-y-hidden",children:r.jsx(o,{"aria-label":e.title?`Scatter Chart: ${e.title}`:"Scatter Chart","aria-roledescription":"scatter chart",height:"100%",options:j(p),data:u})})};function j(e,t){const{theme:a}=e;return{responsive:true,maintainAspectRatio:false,animation:{duration:400,easing:"linear"},scales:{y:{min:e.yAxisMin,grid:{display:false},afterDataLimits:function(t){n(t,e.results,[...e.metrics],e.dps)},title:{display:!!e.yAxisTitle,text:e.yAxisTitle}},x:{reverse:e.reverseXAxis,type:e.isTimeDimension?"time":"category",time:{round:e.granularity,isoWeekday:true,displayFormats:a.dateFormats,unit:e.granularity},grid:{display:false},title:{display:!!e.xAxisTitle,text:e.xAxisTitle}}},layout:{padding:{left:0,right:0,top:e.showLabels?30:0,bottom:0}},plugins:{datalabels:{display:e.showLabels?"auto":false,anchor:"end",align:"end",backgroundColor:a.charts.scatter.labels.backgroundColor,borderRadius:a.charts.scatter.labels.borderRadius,color:a.charts.scatter.labels.color,font:{size:a.charts.scatter.labels.font.size,weight:a.charts.scatter.labels.font.weight},formatter:(t,a)=>{const r=a.datasetIndex,s=e.metrics[r];return t?C(t.y,{type:"number",dps:e.dps,meta:s==null?void 0:s.meta}):null}},tooltip:{callbacks:{label:function(t){let a=t.dataset.label||"";const r=t.datasetIndex,s=e.metrics[r];return t.parsed.y!==null&&(a+=`: ${C(`${t.parsed.y}`,{type:"number",dps:e.dps,meta:s==null?void 0:s.meta})}`),a}}},legend:{display:e.showLegend,position:"bottom",labels:{usePointStyle:true,boxHeight:10}}}}}function w(e,t){const{theme:a}=e;return{datasets:e.metrics.map(((r,s)=>({label:r.title,data:(t==null?void 0:t.map((t=>({x:t[e.xAxis.name],y:parseFloat(t[r.name])||0}))))||[],backgroundColor:x(a.charts.colors[s],.8)})))}}const D={name:"ScatterChart",label:"Scatter chart",classNames:["inside-card"],category:"Charts: essentials",inputs:[{name:"ds",type:"dataset",label:"Dataset",description:"Dataset",defaultValue:false,category:"Chart data"},{name:"xAxis",type:"dimension",label:"X-Axis",config:{dataset:"ds",hideGranularity:true},category:"Chart data"},{name:"metrics",type:"measure",label:"Metrics",array:true,config:{dataset:"ds",hideGranularity:true},category:"Chart data"},{name:"limit",type:"number",label:"Limit results",category:"Chart data"},{name:"granularity",type:"granularity",label:"Granularity",defaultValue:"week",category:"Variables to configure"},{name:"title",type:"string",label:"Title",description:"The title for the chart",category:"Chart settings"},{name:"description",type:"string",label:"Description",description:"The description for the chart",category:"Chart settings"},{name:"showLegend",type:"boolean",label:"Show Legend",category:"Chart settings",defaultValue:true},{name:"showLabels",type:"boolean",label:"Show Labels",category:"Chart settings",defaultValue:false},{name:"reverseXAxis",type:"boolean",label:"Reverse X Axis",category:"Chart settings",defaultValue:false},{name:"xAxisTitle",type:"string",label:"X-Axis Title",category:"Chart settings"},{name:"yAxisTitle",type:"string",label:"Y-Axis Title",category:"Chart settings"},{name:"yAxisMin",type:"number",label:"Y-Axis minimum value",category:"Chart settings"},{name:"dps",type:"number",label:"Decimal Places",category:"Formatting"},{name:"enableDownloadAsCSV",type:"boolean",label:"Show download as CSV",category:"Export options",defaultValue:true},{name:"enableDownloadAsPNG",type:"boolean",label:"Show download as PNG",category:"Export options",defaultValue:true}]},A=t(v,D,{props:t=>{var a;const r=[];r.push({property:t.xAxis,direction:"desc"});const s=t.xAxis.nativeType==="time";return{...t,reverseXAxis:t.reverseXAxis,isTimeDimension:s,results:s?e({from:t.ds,orderBy:r,select:[{dimension:(a=t.xAxis)==null?void 0:a.name,granularity:t.granularity},t.metrics],limit:t.limit||50}):e({from:t.ds,select:[t.xAxis,t.metrics],limit:t.limit||50})}}});export{A as default,D as meta};
//# sourceMappingURL=p-BypLY763.js.map