import{D as e}from"./p-B7Yk6rNY.js";import{G as t,k as a}from"./p-C4wedjxV.js";import{S as r}from"./p-BG3D11hv.js";import{W as s,B as l,I as i,w as o,Y as n,U as p,v as d,P as m,k as u,E as c,M as y,m as g,a as b}from"./p-CKrqpXF-.js";import"./p-BwPuT_aN.js";import{D as f}from"./p-BpMJ0iVV.js";import{R as h}from"./p-DNmQi9H5.js";import{n as C,c as x}from"./p-BvW5kj19.js";import{m as v}from"./p-e2Wdry-T.js";import{r as j}from"./p-BIFnrNPV.js";import{P as w}from"./p-D9lurr2W.js";import"./p-DUIxdZrE.js";import"./p-BcYWNS4N.js";import"./p-CBK12GNN.js";import"./p-DgA2OfDc.js";o.register(n,p,d,m,u,c,y,g,b);const D=e=>{const{fillGaps:t}=h(e,"desc"),o=a();s(o,"line");const n={...e,theme:o},p=f.useMemo((()=>{var a;const{results:r,metrics:s,applyFill:l,theme:i}=n,o=(a=r==null?void 0:r.data)==null?void 0:a.reduce(t,[]);let p=i.charts.colors;return i.charts.line.colors&&(p=i.charts.line.colors),{datasets:(s==null?void 0:s.map(((t,a)=>({label:t.title,data:(o==null?void 0:o.map((a=>{var r;return{y:parseFloat(a[t.name]||"0"),x:C(a[((r=e.xAxis)==null?void 0:r.name)||""])}})))||[],backgroundColor:l?j(p[a%p.length],.2):p[a%p.length],borderColor:p[a%p.length],pointRadius:0,tension:i.charts.line.lineTension,pointHoverRadius:3,fill:l,cubicInterpolationMode:i.charts.bar.cubicInterpolationMode}))))||[]}}),[n,t]),d=f.useMemo((()=>({responsive:true,maintainAspectRatio:false,interaction:{mode:"index",intersect:false},layout:{padding:{left:0,right:0,top:n.showLabels?20:0,bottom:0}},scales:{y:{min:n.yAxisMin,grace:"0%",grid:{display:false},title:{display:!!n.yAxisTitle,text:n.yAxisTitle},callback:function(e){return x(e.toString(),{type:"number"})},afterDataLimits:function(e){l(e,n.results,[...n.metrics],n.dps)}},x:{grid:{display:false},title:{display:!!n.xAxisTitle,text:n.xAxisTitle},type:"time",time:{round:n.granularity,displayFormats:o.dateFormats,unit:n.granularity}}},animation:{duration:400,easing:"linear"},plugins:{legend:{display:n.showLegend,position:"bottom",labels:{usePointStyle:true,boxHeight:8}},datalabels:{align:"top",display:n.showLabels?"auto":false,backgroundColor:o.charts.line.labels.backgroundColor,borderRadius:o.charts.line.labels.borderRadius,color:o.charts.line.labels.color,font:{size:o.charts.line.labels.font.size,weight:o.charts.line.labels.font.weight},formatter:(e,t)=>{const a=t.datasetIndex,r=n.metrics[a];return e?x(e.y,{type:"number",dps:n.dps,meta:r==null?void 0:r.meta}):null}},tooltip:{callbacks:{label:function(e){const t=e.datasetIndex,a=n.metrics[t];let r=e.dataset.label||"";return e.parsed.y!==null&&(r+=`: ${x(`${e.parsed.y}`,{type:"number",dps:n.dps,meta:a==null?void 0:a.meta})}`),r},title:e=>v(e,n.granularity,o)}}}})),[n,o.dateFormats]);return r.jsx(w,{...n,className:"overflow-y-hidden",children:r.jsx(i,{height:"100%",options:d,data:p})})},V={name:"LineChart",label:"Line chart (time-series)",classNames:["inside-card"],category:"Charts: time-series",inputs:[{name:"ds",type:"dataset",label:"Dataset",description:"Dataset",defaultValue:false,category:"Chart data"},{name:"xAxis",type:"dimension",label:"X-Axis",config:{dataset:"ds",supportedTypes:["time"],hideGranularity:true},category:"Chart data"},{name:"metrics",type:"measure",array:true,label:"Metrics",config:{dataset:"ds"},category:"Chart data"},{name:"granularity",type:"granularity",label:"Granularity",defaultValue:"day",category:"Variables to configure"},{name:"title",type:"string",label:"Title",description:"The title for the chart",category:"Chart settings"},{name:"description",type:"string",label:"Description",description:"The description for the chart",category:"Chart settings"},{name:"xAxisTitle",type:"string",label:"X-Axis Title",category:"Chart settings"},{name:"yAxisTitle",type:"string",label:"Y-Axis Title",category:"Chart settings"},{name:"showLabels",type:"boolean",label:"Show Labels",category:"Chart settings",defaultValue:false},{name:"applyFill",type:"boolean",label:"Color fill space under line",category:"Chart settings",defaultValue:false},{name:"yAxisMin",type:"number",label:"Y-Axis minimum value",category:"Chart settings"},{name:"showLegend",type:"boolean",label:"Show Legend",category:"Chart settings",defaultValue:true},{name:"limit",type:"number",label:"Limit results",defaultValue:100,category:"Chart settings"},{name:"dps",type:"number",label:"Decimal Places",category:"Formatting"},{name:"enableDownloadAsCSV",type:"boolean",label:"Show download as CSV",category:"Export options",defaultValue:true},{name:"enableDownloadAsPNG",type:"boolean",label:"Show download as PNG",category:"Export options",defaultValue:true}]},A=t(D,V,{props:t=>{var a;const r=[];return r.push({property:t.xAxis,direction:"desc"}),{...t,results:e({from:t.ds,limit:t.limit||500,orderBy:r,select:[{dimension:(a=t.xAxis)==null?void 0:a.name,granularity:t.granularity},t.metrics]})}}});export{A as default,V as meta};
//# sourceMappingURL=p-CADwFAo3.js.map