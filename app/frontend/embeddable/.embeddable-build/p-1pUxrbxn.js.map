{"version":3,"file":"p-1pUxrbxn.js","sources":["../embeddable-prepared-build/DynamicAxisBar-C5UL1d2-.js"],"sourcesContent":["import { v as y } from \"./Spinner-BeNoTciJ-kkBeaSg9.js\";\nimport { d as v, a as w, u as A } from \"./index.esm-DkvBbpcs.js\";\nimport { j as o } from \"./jsx-runtime-CjQXaSqQ-BLZX7BjA.js\";\nimport { r as C } from \"./embeddable-entry-point-D3beHFX4.js\";\nimport { W as V } from \"./Container-DH8gzj0m-Y5Uily2v.js\";\nimport { q as D } from \"./BarChart-CMp51xDM-t2McuD6x.js\";\nimport { c as S } from \"./format-TjzP8gQX-c7QlZqos.js\";\nconst j = (e) => {\n  var s, i, r;\n  const { results: l } = e, [m, x] = C.useState(e.xAxis.name), [T, g] = w({ dimension: null }), u = A(), d = (s = e.xAxisOptions) != null && s.find((a) => e.xAxis.name === a.name) ? e.xAxisOptions : [...e.xAxisOptions || [], e.xAxis], f = (a) => {\n    x(a);\n    const n = d.find((h) => a === h.name) || null;\n    g({ dimension: n });\n  }, t = d.find((a) => m === a.name);\n  let c;\n  (t == null ? void 0 : t.nativeType) === \"time\" && e.granularity && e.granularity in u.dateFormats && (c = u.dateFormats[e.granularity]);\n  const b = {\n    ...e,\n    theme: u,\n    xAxis: t || e.xAxis\n  }, p = ((i = l == null ? void 0 : l.data) == null ? void 0 : i.map((a) => ({\n    ...a,\n    ...(t == null ? void 0 : t.name) && {\n      [t.name]: c ? S(a == null ? void 0 : a[t.name], {\n        meta: t == null ? void 0 : t.meta,\n        dateFormat: c\n      }) : a == null ? void 0 : a[t.name]\n    }\n  }))) ?? [];\n  return /* @__PURE__ */ o.jsxs(V, { ...e, className: \"overflow-y-hidden\", children: [\n    /* @__PURE__ */ o.jsx(\"div\", { className: \"flex h-[60px] w-full\", children: /* @__PURE__ */ o.jsx(\"div\", { children: /* @__PURE__ */ o.jsx(\n      \"select\",\n      {\n        className: `\n              border\n              flex\n              h-10\n              items-center\n              min-w-[50px]\n              px-3\n              relative\n              w-full\n              border-[color:--embeddable-controls-borders-colors-normal]\n              rounded-[--embeddable-controls-borders-radius]\n            `,\n        value: m,\n        onChange: (a) => f(a.target.value),\n        children: d == null ? void 0 : d.map((a, n) => /* @__PURE__ */ o.jsx(\"option\", { value: a.name, children: a.title }, n))\n      }\n    ) }) }),\n    /* @__PURE__ */ o.jsx(\"div\", { className: \"flex grow overflow-hidden\", children: l.isLoading || !t || !((r = p == null ? void 0 : p.filter((a, n) => n < 10)) != null && r.some((a) => a[t.name])) ? null : /* @__PURE__ */ o.jsx(D, { ...b, results: { ...l, data: p } }, m) })\n  ] });\n}, N = {\n  name: \"DynamicAxisBar\",\n  label: \"Dynamic-axis bar chart\",\n  classNames: [\"inside-card\"],\n  category: \"Misc\",\n  inputs: [\n    {\n      name: \"ds\",\n      type: \"dataset\",\n      label: \"Dataset to download from\",\n      category: \"Chart data\"\n    },\n    {\n      name: \"xAxis\",\n      type: \"dimension\",\n      label: \"Default X-axis\",\n      config: {\n        dataset: \"ds\",\n        hideGranularity: !0\n      },\n      category: \"Chart data\"\n    },\n    {\n      name: \"xAxisOptions\",\n      type: \"dimension\",\n      array: !0,\n      label: \"X-axis options\",\n      config: {\n        dataset: \"ds\",\n        hideGranularity: !0\n      },\n      category: \"Chart data\"\n    },\n    {\n      name: \"metrics\",\n      type: \"measure\",\n      array: !0,\n      label: \"Metrics\",\n      config: {\n        dataset: \"ds\"\n      },\n      category: \"Chart data\"\n    },\n    {\n      name: \"granularity\",\n      type: \"granularity\",\n      label: \"Granularity (for dates)\",\n      defaultValue: \"week\",\n      category: \"Variables to configure\"\n    },\n    {\n      name: \"title\",\n      type: \"string\",\n      label: \"Title\",\n      description: \"The title for the button\",\n      category: \"Chart settings\"\n    },\n    {\n      name: \"description\",\n      type: \"string\",\n      label: \"Description\",\n      description: \"The description for the button\",\n      category: \"Chart settings\"\n    },\n    {\n      name: \"showLegend\",\n      type: \"boolean\",\n      label: \"Show Legend\",\n      category: \"Chart settings\",\n      defaultValue: !0\n    },\n    {\n      name: \"showLabels\",\n      type: \"boolean\",\n      label: \"Show Labels\",\n      category: \"Chart settings\",\n      defaultValue: !1\n    },\n    {\n      name: \"displayHorizontally\",\n      type: \"boolean\",\n      label: \"Display Horizontally\",\n      category: \"Chart settings\",\n      defaultValue: !1\n    },\n    {\n      name: \"reverseXAxis\",\n      type: \"boolean\",\n      label: \"Reverse X Axis\",\n      category: \"Chart settings\",\n      defaultValue: !1\n    },\n    {\n      name: \"dps\",\n      type: \"number\",\n      label: \"Decimal Places\",\n      category: \"Formatting\"\n    },\n    {\n      name: \"enableDownloadAsPNG\",\n      type: \"boolean\",\n      label: \"Show download as PNG\",\n      category: \"Export options\",\n      defaultValue: !0\n    },\n    {\n      name: \"enableDownloadAsCSV\",\n      type: \"boolean\",\n      label: \"Show download as CSV\",\n      category: \"Export options\",\n      defaultValue: !0\n    }\n  ]\n}, P = v(j, N, {\n  props: (e, [s]) => {\n    var i;\n    const r = (i = s == null ? void 0 : s.dimension) != null && i.title ? s.dimension : e.xAxis, l = r.nativeType === \"time\";\n    return {\n      ...e,\n      reverseXAxis: e.reverseXAxis || l,\n      results: l ? y({\n        from: e.ds,\n        select: [\n          {\n            dimension: r.name,\n            granularity: e.granularity\n          },\n          e.metrics\n        ],\n        orderBy: [\n          {\n            property: r,\n            direction: \"desc\"\n          }\n        ],\n        limit: 100\n      }) : y({\n        from: e.ds,\n        select: [r, e.metrics],\n        orderBy: [\n          {\n            property: e.metrics[0],\n            direction: \"desc\"\n          }\n        ],\n        limit: 100\n      })\n    };\n  }\n});\nexport {\n  P as default,\n  N as meta\n};\n//# sourceMappingURL=DynamicAxisBar-C5UL1d2-.js.map\n"],"names":["C","w","A","S","o","V","D","v","y"],"mappings":"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"}