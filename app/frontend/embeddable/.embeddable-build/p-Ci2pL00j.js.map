{"version":3,"file":"p-Ci2pL00j.js","sources":["../embeddable-prepared-build/DownloadButton-DjE2jSi8.js"],"sourcesContent":["import { O as x, $ as v, v as y } from \"./Spinner-BeNoTciJ-kkBeaSg9.js\";\nimport { d as j, u as S, a as k } from \"./index.esm-DkvBbpcs.js\";\nimport { j as o } from \"./jsx-runtime-CjQXaSqQ-BLZX7BjA.js\";\nimport { r as i } from \"./embeddable-entry-point-D3beHFX4.js\";\nfunction D({ buttonLabel: t, showSpinner: e, disabled: r, onClick: n, icon: b }) {\n  return /* @__PURE__ */ o.jsxs(\n    \"button\",\n    {\n      disabled: r,\n      className: `\n        border\n        disabled:cursor-not-allowed\n        disabled:opacity-[0.6]\n        flex\n        gap-[8px]\n        items-center\n        justify-center\n        bg-[color:--embeddable-controls-buttons-active-background]\n        border-[color:--embeddable-controls-buttons-active-border]\n        h-[--embeddable-controls-buttons-height]\n        hover:bg-[color:--embeddable-controls-buttons-hovered-background]\n        hover:border-[color:--embeddable-controls-buttons-hovered-border]\n        hover:text-[color:--embeddable-controls-buttons-hovered-fontColor]\n        pressed:bg-[color:--embeddable-controls-buttons-colors-pressed]\n        pressed:border-[color:--embeddable-controls-buttons-pressed-border]\n        pressed:text-[color:--embeddable-controls-buttons-pressed-fontColor]\n        px-[--embeddable-controls-buttons-paddingX]\n        py-[--embeddable-controls-buttons-paddingY]\n        rounded-[--embeddable-controls-buttons-radius] \n        text-[color:--embeddable-controls-buttons-active-fontColor]\n        text-[font-size:--embeddable-font-size]\n      `,\n      onClick: n,\n      type: \"button\",\n      children: [\n        e ? /* @__PURE__ */ o.jsx(v, { show: !0, className: \"relative\", size: \"20\" }) : b,\n        t\n      ]\n    }\n  );\n}\nconst L = (t) => {\n  const { results: e, buttonLabel: r } = t, n = S(), [b, a] = k({ downloading: !1 }), [s, l] = i.useState(!1), [c, p] = i.useState([]);\n  i.useEffect(() => {\n    var u;\n    if (s) {\n      if (!e || !e.data || JSON.stringify(e == null ? void 0 : e.data) === JSON.stringify(c))\n        return;\n      const m = (C) => Object.fromEntries(\n        Object.entries(C).map(([w, d]) => [\n          w,\n          d === null || d === \"No Value\" ? \"\" : d\n        ])\n      ), h = e.data.map(m), f = (u = e.prevData) == null ? void 0 : u.map(m);\n      x(\n        t,\n        h,\n        f || [],\n        \"downloaded-chart-data\",\n        l\n      ), p((e == null ? void 0 : e.data) || []), l(!1), a({ downloading: !1 });\n    }\n  }, [s, e, t, a, c]);\n  const g = /* @__PURE__ */ o.jsxs(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"20\", height: \"20\", viewBox: \"0 0 24 24\", fill: \"none\", children: [\n    /* @__PURE__ */ o.jsx(\"g\", { clipPath: \"url(#clip0_271_1583)\", children: /* @__PURE__ */ o.jsx(\n      \"path\",\n      {\n        d: \"M18.6381 16.3934C19.642 16.0066 20.5242 15.5087 21.2192 14.8964C22.0401 14.1733 22.562 13.1801 22.6861 12.105C22.8102 11.0299 22.5278 9.94756 21.8927 9.06283C21.2574 8.1781 20.3133 7.55246 19.2392 7.30435C19.1649 7.28263 19.0986 7.24058 19.048 7.18313C18.9974 7.12569 18.9647 7.05525 18.9536 6.98011C18.8207 5.55336 18.1931 4.21437 17.1752 3.18641C16.1573 2.15846 14.8107 1.50368 13.36 1.33129C11.9093 1.15889 10.4421 1.47929 9.20317 2.23905C7.96425 2.99882 7.02844 4.15202 6.5518 5.50636C6.52028 5.56951 6.47096 5.62248 6.40969 5.65905C6.34842 5.69561 6.27777 5.71421 6.20606 5.71269C5.51514 5.75817 4.8401 5.93662 4.21953 6.23786C3.59894 6.53909 3.04496 6.95722 2.58921 7.46837C1.66876 8.50066 1.2043 9.84916 1.29799 11.2172C1.39168 12.5852 2.03586 13.8607 3.08879 14.7631C3.64641 15.241 4.32746 15.6568 5.09728 16.0085M5.96024 5.71713C7.99888 5.71713 9.82211 7.06087 10.3973 8.2885M12.0004 13.4472V22.6658M8.48186 19.6122C9.55106 20.9781 10.2793 21.6138 11.3646 22.445C11.7486 22.7392 12.2524 22.7392 12.6364 22.445C13.7217 21.6138 14.4499 20.9781 15.5191 19.6122\",\n        stroke: n.svg.strokeNormal,\n        strokeWidth: \"1.71429\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\"\n      }\n    ) }),\n    /* @__PURE__ */ o.jsx(\"defs\", { children: /* @__PURE__ */ o.jsx(\"clipPath\", { id: \"clip0_271_1583\", children: /* @__PURE__ */ o.jsx(\"rect\", { width: \"24\", height: \"24\", fill: \"white\" }) }) })\n  ] });\n  return /* @__PURE__ */ o.jsx(\n    D,\n    {\n      buttonLabel: r,\n      showSpinner: s,\n      disabled: (e == null ? void 0 : e.isLoading) || s,\n      onClick: () => {\n        a({ downloading: !0 }), l(!0);\n      },\n      icon: g\n    }\n  );\n}, M = {\n  name: \"DownloadButton\",\n  label: \"Download Button\",\n  defaultWidth: 200,\n  defaultHeight: 100,\n  category: \"Download options\",\n  inputs: [\n    {\n      name: \"ds\",\n      type: \"dataset\",\n      label: \"Dataset to download from\",\n      category: \"Data\"\n    },\n    {\n      name: \"columns\",\n      type: \"dimensionOrMeasure\",\n      array: !0,\n      required: !0,\n      label: \"Columns to include in download\",\n      config: {\n        dataset: \"ds\"\n      },\n      category: \"Data\"\n    },\n    {\n      name: \"title\",\n      type: \"string\",\n      label: \"Title\",\n      description: \"The title for the button\",\n      category: \"Settings\"\n    },\n    {\n      name: \"description\",\n      type: \"string\",\n      label: \"Description\",\n      description: \"The description for the button\",\n      category: \"Settings\"\n    },\n    {\n      name: \"buttonLabel\",\n      type: \"string\",\n      label: \"Button label\",\n      description: \"The text to show on the button\",\n      defaultValue: \"Download\",\n      category: \"Settings\"\n    },\n    {\n      name: \"maxRows\",\n      type: \"number\",\n      label: \"Maximum number of rows to download\",\n      defaultValue: 100,\n      category: \"Settings\"\n    }\n  ]\n}, E = j(L, M, {\n  props: (t, [e]) => {\n    const r = (e == null ? void 0 : e.downloading) === !0;\n    let n = {\n      isLoading: !1\n    };\n    return r ? (n = y({\n      from: t.ds,\n      select: t.columns,\n      limit: t.maxRows || void 0\n    }), {\n      ...t,\n      results: n\n    }) : {\n      ...t\n    };\n  }\n});\nexport {\n  E as default,\n  M as meta\n};\n//# sourceMappingURL=DownloadButton-DjE2jSi8.js.map\n"],"names":["o","v","S","k","i","x","j","y"],"mappings":";;;;;;AAIA,SAAS,CAAC,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,EAAE;AACjF,EAAE,uBAAuBA,CAAC,CAAC,IAAI;AAC/B,IAAI,QAAQ;AACZ,IAAI;AACJ,MAAM,QAAQ,EAAE,CAAC;AACjB,MAAM,SAAS,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,CAAC;AACP,MAAM,OAAO,EAAE,CAAC;AAChB,MAAM,IAAI,EAAE,QAAQ;AACpB,MAAM,QAAQ,EAAE;AAChB,QAAQ,CAAC,mBAAmBA,CAAC,CAAC,GAAG,CAACC,EAAC,EAAE,EAAE,IAAI,EAAE,IAAE,EAAE,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC;AACzF,QAAQ;AACR;AACA;AACA,GAAG;AACH;AACK,MAAC,CAAC,GAAG,CAAC,CAAC,KAAK;AACjB,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,GAAGC,EAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGC,EAAC,CAAC,EAAE,WAAW,EAAE,KAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGC,EAAC,CAAC,QAAQ,CAAC,KAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGA,EAAC,CAAC,QAAQ,CAAC,EAAE,CAAC;AACtI,EAAEA,EAAC,CAAC,SAAS,CAAC,MAAM;AACpB,IAAI,IAAI,CAAC;AACT,IAAI,IAAI,CAAC,EAAE;AACX,MAAM,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;AAC5F,QAAQ;AACR,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,MAAM,CAAC,WAAW;AACzC,QAAQ,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK;AAC1C,UAAU,CAAC;AACX,UAAU,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,UAAU,GAAG,EAAE,GAAG;AAChD,SAAS;AACT,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,KAAK,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AAC5E,MAAMC,EAAC;AACP,QAAQ,CAAC;AACT,QAAQ,CAAC;AACT,QAAQ,CAAC,IAAI,EAAE;AACf,QAAQ,uBAAuB;AAC/B,QAAQ;AACR,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC,IAAI,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,KAAE,CAAC,EAAE,CAAC,CAAC,EAAE,WAAW,EAAE,KAAE,EAAE,CAAC;AAC9E;AACA,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACrB,EAAE,MAAM,CAAC,mBAAmBL,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,4BAA4B,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,WAAW,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE;AAC1J,oBAAoBA,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,sBAAsB,EAAE,QAAQ,kBAAkBA,CAAC,CAAC,GAAG;AAClG,MAAM,MAAM;AACZ,MAAM;AACN,QAAQ,CAAC,EAAE,4iCAA4iC;AACvjC,QAAQ,MAAM,EAAE,CAAC,CAAC,GAAG,CAAC,YAAY;AAClC,QAAQ,WAAW,EAAE,SAAS;AAC9B,QAAQ,aAAa,EAAE,OAAO;AAC9B,QAAQ,cAAc,EAAE;AACxB;AACA,KAAK,EAAE,CAAC;AACR,oBAAoBA,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,QAAQ,kBAAkBA,CAAC,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,EAAE,EAAE,gBAAgB,EAAE,QAAQ,kBAAkBA,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE;AAClM,GAAG,EAAE,CAAC;AACN,EAAE,uBAAuBA,CAAC,CAAC,GAAG;AAC9B,IAAI,CAAC;AACL,IAAI;AACJ,MAAM,WAAW,EAAE,CAAC;AACpB,MAAM,WAAW,EAAE,CAAC;AACpB,MAAM,QAAQ,EAAE,CAAC,CAAC,IAAI,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC,SAAS,KAAK,CAAC;AACvD,MAAM,OAAO,EAAE,MAAM;AACrB,QAAQ,CAAC,CAAC,EAAE,WAAW,EAAE,IAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAE,CAAC;AACrC,OAAO;AACP,MAAM,IAAI,EAAE;AACZ;AACA,GAAG;AACH,CAAC,CAAC,CAAC,CAAC,GAAG;AACP,EAAE,IAAI,EAAE,gBAAgB;AACxB,EAAE,KAAK,EAAE,iBAAiB;AAC1B,EAAE,YAAY,EAAE,GAAG;AACnB,EAAE,aAAa,EAAE,GAAG;AACpB,EAAE,QAAQ,EAAE,kBAAkB;AAC9B,EAAE,MAAM,EAAE;AACV,IAAI;AACJ,MAAM,IAAI,EAAE,IAAI;AAChB,MAAM,IAAI,EAAE,SAAS;AACrB,MAAM,KAAK,EAAE,0BAA0B;AACvC,MAAM,QAAQ,EAAE;AAChB,KAAK;AACL,IAAI;AACJ,MAAM,IAAI,EAAE,SAAS;AACrB,MAAM,IAAI,EAAE,oBAAoB;AAChC,MAAM,KAAK,EAAE,IAAE;AACf,MAAM,QAAQ,EAAE,IAAE;AAClB,MAAM,KAAK,EAAE,gCAAgC;AAC7C,MAAM,MAAM,EAAE;AACd,QAAQ,OAAO,EAAE;AACjB,OAAO;AACP,MAAM,QAAQ,EAAE;AAChB,KAAK;AACL,IAAI;AACJ,MAAM,IAAI,EAAE,OAAO;AACnB,MAAM,IAAI,EAAE,QAAQ;AACpB,MAAM,KAAK,EAAE,OAAO;AACpB,MAAM,WAAW,EAAE,0BAA0B;AAC7C,MAAM,QAAQ,EAAE;AAChB,KAAK;AACL,IAAI;AACJ,MAAM,IAAI,EAAE,aAAa;AACzB,MAAM,IAAI,EAAE,QAAQ;AACpB,MAAM,KAAK,EAAE,aAAa;AAC1B,MAAM,WAAW,EAAE,gCAAgC;AACnD,MAAM,QAAQ,EAAE;AAChB,KAAK;AACL,IAAI;AACJ,MAAM,IAAI,EAAE,aAAa;AACzB,MAAM,IAAI,EAAE,QAAQ;AACpB,MAAM,KAAK,EAAE,cAAc;AAC3B,MAAM,WAAW,EAAE,gCAAgC;AACnD,MAAM,YAAY,EAAE,UAAU;AAC9B,MAAM,QAAQ,EAAE;AAChB,KAAK;AACL,IAAI;AACJ,MAAM,IAAI,EAAE,SAAS;AACrB,MAAM,IAAI,EAAE,QAAQ;AACpB,MAAM,KAAK,EAAE,oCAAoC;AACjD,MAAM,YAAY,EAAE,GAAG;AACvB,MAAM,QAAQ,EAAE;AAChB;AACA;AACA,CAAC,CAAC,CAAC,CAAC,GAAGM,EAAC,CAAC,CAAC,EAAE,CAAC,EAAE;AACf,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK;AACrB,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC,WAAW,MAAM,IAAE;AACzD,IAAI,IAAI,CAAC,GAAG;AACZ,MAAM,SAAS,EAAE;AACjB,KAAK;AACL,IAAI,OAAO,CAAC,IAAI,CAAC,GAAGC,EAAC,CAAC;AACtB,MAAM,IAAI,EAAE,CAAC,CAAC,EAAE;AAChB,MAAM,MAAM,EAAE,CAAC,CAAC,OAAO;AACvB,MAAM,KAAK,EAAE,CAAC,CAAC,OAAO,IAAI;AAC1B,KAAK,CAAC,EAAE;AACR,MAAM,GAAG,CAAC;AACV,MAAM,OAAO,EAAE;AACf,KAAK,IAAI;AACT,MAAM,GAAG;AACT,KAAK;AACL;AACA,CAAC;;;;"}