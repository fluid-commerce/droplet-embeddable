import{S as e}from"./p-D-ZJqqO3.js";import{D as l}from"./p-UGbmf8ph.js";import{w as o}from"./p-DZclBDBz.js";import{h as t,r}from"./p-DfVMOE-b.js";import{P as n,R as s,T as a}from"./p-BDmepEmC.js";import{n as i}from"./p-CBBXROm1.js";const c=c=>{const u=l.useRef(null),[p,m]=l.useState(false),[d,f]=l.useState(false),[h,b]=l.useState(""),[x,v]=l.useState(false),[w,D]=l.useState(c.defaultValue);l.useEffect((()=>{D(c.defaultValue)}),[c.defaultValue]),l.useEffect((()=>{let e=null;return d?e&&clearTimeout(e):e=setTimeout((()=>{m(false)}),200),()=>{e&&clearTimeout(e)}}),[d]),l.useLayoutEffect((()=>{if(!x)return;const e=setTimeout((()=>{m(false),v(false)}),500);return()=>clearTimeout(e)}),[x]);const N=l.useCallback((e=>{b(e)}),[b]),g=l.useCallback((e=>{N("");let l=[];e!==""&&(l=w||[],l!=null&&l.includes(e)?l=l.filter((l=>l!==e)):l=[...l,e]),c.onChange(l),D(l)}),[N,c,w]),B=(e,l,o)=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),l(e)),e.key==="Escape"&&(e.preventDefault(),m(false),v(true))},C=l.useMemo((()=>c.options.filter((e=>i(h,e))).map((l=>e.jsxs("div",{role:"button",onClick:()=>{v(false),g(l.value)},onKeyDown:e=>B(e,g(l.value)),onFocus:()=>{f(true),m(true)},onBlur:()=>{f(false)},className:`flex items-left items-center min-h-[36px] px-3 py-2 hover:bg-black/5 cursor-pointer font-normal ${w!=null&&w.includes(l.value)?"bg-black/5":""} truncate`,tabIndex:0,children:[w!=null&&w.includes(l.value)?e.jsx(t,{}):e.jsx(r,{}),e.jsx("span",{className:"font-normal pl-1 truncate",title:l.label,children:l.label})]},l.value)))),[c,w,g,h]);return e.jsx(n,{title:c.title,children:e.jsxs("div",{className:o("relative rounded-xl w-full min-w-[50px] h-10 border border-[#DADCE1] flex items-center",c.className),children:[e.jsx("input",{ref:u,value:h,name:"dropdown",placeholder:c.placeholder,onClick:()=>{m(true),v(false)},onFocus:()=>{m(true),v(false),f(true)},onBlur:()=>{f(false)},onChange:e=>N(e.target.value),className:`outline-none bg-transparent leading-9 h-9 border-0 px-3 w-full cursor-pointer text-sm ${p||!w?"":"opacity-0"}`}),!!w&&e.jsxs("span",{className:`absolute w-[calc(100%-2rem)] whitespace-nowrap overflow-hidden truncate rounded-xl left-3 top-1 h-8 leading-8 block pointer-events-none text-sm ${p?"hidden":""}`,children:["Selected ",w.length," ",w.length===1?"option":"options"]}),p&&e.jsxs("div",{style:{minWidth:c.minDropdownWidth},className:"flex flex-col bg-white rounded-xl absolute top-11 z-50 border border-[#DADCE1] w-full overflow-y-auto overflow-x-hidden max-h-[400px]",onMouseDown:e=>{var l;e.preventDefault(),(l=u.current)==null||l.focus(),v(false)},onFocus:()=>{f(true)},onBlur:()=>{f(false)},tabIndex:0,children:[C,(C==null?void 0:C.length)===0&&!!h&&e.jsx("div",{className:"px-3 py-2 text-black/50 italic cursor-pointer",children:"No results"})]}),e.jsx(s,{className:"absolute right-2.5 top-2.5 z-1 pointer-events-none"}),!c.unclearable&&!!w&&e.jsx("div",{onClick:()=>{g("")},className:"absolute right-10 top-0 h-10 flex items-center z-10 cursor-pointer",children:e.jsx(a,{})})]})})};export{c as B};
//# sourceMappingURL=p-C3tPm2fl.js.map