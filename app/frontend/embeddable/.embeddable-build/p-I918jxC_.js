import{S as e}from"./p-BG3D11hv.js";import{D as l}from"./p-BpMJ0iVV.js";import{w as r}from"./p-B7Yk6rNY.js";import{h as o,r as t}from"./p-JmBl84Vv.js";import{P as n,R as s,T as a}from"./p-D9lurr2W.js";import{n as i}from"./p-CBBXROm1.js";const u=u=>{const c=l.useRef(null),[p,m]=l.useState(false),[d,f]=l.useState(false),[h,x]=l.useState(""),[b,v]=l.useState(false),[w,N]=l.useState(u.defaultValue);l.useEffect((()=>{N(u.defaultValue)}),[u.defaultValue]),l.useEffect((()=>{let e=null;return d?e&&clearTimeout(e):e=setTimeout((()=>{m(false)}),200),()=>{e&&clearTimeout(e)}}),[d]),l.useLayoutEffect((()=>{if(!b)return;const e=setTimeout((()=>{m(false),v(false)}),500);return()=>clearTimeout(e)}),[b]);const g=l.useCallback((e=>{x(e)}),[x]),B=l.useCallback((e=>{g("");let l=[];e!==""&&(l=w||[],l!=null&&l.includes(e)?l=l.filter((l=>l!==e)):l=[...l,e]),u.onChange(l),N(l)}),[g,u,w]),D=(e,l,r)=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),l(e)),e.key==="Escape"&&(e.preventDefault(),m(false),v(true))},k=l.useMemo((()=>u.options.filter((e=>i(h,e))).map((l=>e.jsxs("div",{role:"button",onClick:()=>{v(false),B(l.value)},onKeyDown:e=>D(e,B(l.value)),onFocus:()=>{f(true),m(true)},onBlur:()=>{f(false)},className:`flex items-left items-center min-h-[36px] px-3 py-2 hover:bg-black/5 cursor-pointer font-normal ${w!=null&&w.includes(l.value)?"bg-black/5":""} truncate`,tabIndex:0,children:[w!=null&&w.includes(l.value)?e.jsx(o,{}):e.jsx(t,{}),e.jsx("span",{className:"font-normal pl-1 truncate",title:l.label,children:l.label})]},l.value)))),[u,w,B,h]);return e.jsx(n,{title:u.title,children:e.jsxs("div",{className:r("relative rounded-xl w-full min-w-[50px] h-10 border border-[#DADCE1] flex items-center",u.className),children:[e.jsx("input",{ref:c,value:h,name:"dropdown",placeholder:u.placeholder,onClick:()=>{m(true),v(false)},onFocus:()=>{m(true),v(false),f(true)},onBlur:()=>{f(false)},onChange:e=>g(e.target.value),className:`outline-none bg-transparent leading-9 h-9 border-0 px-3 w-full cursor-pointer text-sm ${p||!w?"":"opacity-0"}`}),!!w&&e.jsxs("span",{className:`absolute w-[calc(100%-2rem)] whitespace-nowrap overflow-hidden truncate rounded-xl left-3 top-1 h-8 leading-8 block pointer-events-none text-sm ${p?"hidden":""}`,children:["Selected ",w.length," ",w.length===1?"option":"options"]}),p&&e.jsxs("div",{style:{minWidth:u.minDropdownWidth},className:"flex flex-col bg-white rounded-xl absolute top-11 z-50 border border-[#DADCE1] w-full overflow-y-auto overflow-x-hidden max-h-[400px]",onMouseDown:e=>{var l;e.preventDefault(),(l=c.current)==null||l.focus(),v(false)},onFocus:()=>{f(true)},onBlur:()=>{f(false)},tabIndex:0,children:[k,(k==null?void 0:k.length)===0&&!!h&&e.jsx("div",{className:"px-3 py-2 text-black/50 italic cursor-pointer",children:"No results"})]}),e.jsx(s,{className:"absolute right-2.5 top-2.5 z-1 pointer-events-none"}),!u.unclearable&&!!w&&e.jsx("div",{onClick:()=>{B("")},className:"absolute right-10 top-0 h-10 flex items-center z-10 cursor-pointer",children:e.jsx(a,{})})]})})};export{u as B};
//# sourceMappingURL=p-I918jxC_.js.map