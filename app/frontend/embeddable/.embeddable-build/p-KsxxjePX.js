import{D as e}from"./p-B7Yk6rNY.js";import{G as t,k as a}from"./p-C4wedjxV.js";import{S as s}from"./p-BG3D11hv.js";import{P as r}from"./p-D9lurr2W.js";import{R as i}from"./p-DNmQi9H5.js";import{W as l,V as o,B as n,w as p,Y as m,U as d,L as u,v as c,k as y,E as g,M as b,m as f,a as h}from"./p-CKrqpXF-.js";import"./p-BwPuT_aN.js";import{c as x}from"./p-BvW5kj19.js";import{r as C}from"./p-BIFnrNPV.js";import"./p-BpMJ0iVV.js";import"./p-CBK12GNN.js";import"./p-DgA2OfDc.js";import"./p-BcYWNS4N.js";import"./p-DUIxdZrE.js";p.register(m,d,u,c,y,g,b,f,h);const v=e=>{var t;const n=a();l(n,"scatter");const p={...e,theme:n},{fillGaps:m}=i(p,"desc"),{results:d}=p,u=p.isTimeDimension?(t=d==null?void 0:d.data)==null?void 0:t.reduce(m,[]):d==null?void 0:d.data,c=w(p,u);return s.jsx(r,{...p,className:"overflow-y-hidden",children:s.jsx(o,{height:"100%",options:j(p),data:c})})};function j(e,t){const{theme:a}=e;return{responsive:true,maintainAspectRatio:false,animation:{duration:400,easing:"linear"},scales:{y:{min:e.yAxisMin,grid:{display:false},afterDataLimits:function(t){n(t,e.results,[...e.metrics],e.dps)},title:{display:!!e.yAxisTitle,text:e.yAxisTitle}},x:{reverse:e.reverseXAxis,type:e.isTimeDimension?"time":"category",time:{round:e.granularity,isoWeekday:true,displayFormats:a.dateFormats,unit:e.granularity},grid:{display:false},title:{display:!!e.xAxisTitle,text:e.xAxisTitle}}},layout:{padding:{left:0,right:0,top:e.showLabels?30:0,bottom:0}},plugins:{datalabels:{display:e.showLabels?"auto":false,anchor:"end",align:"end",backgroundColor:a.charts.scatter.labels.backgroundColor,borderRadius:a.charts.scatter.labels.borderRadius,color:a.charts.scatter.labels.color,font:{size:a.charts.scatter.labels.font.size,weight:a.charts.scatter.labels.font.weight},formatter:(t,a)=>{const s=a.datasetIndex,r=e.metrics[s];return t?x(t.y,{type:"number",dps:e.dps,meta:r==null?void 0:r.meta}):null}},tooltip:{callbacks:{label:function(t){let a=t.dataset.label||"";const s=t.datasetIndex,r=e.metrics[s];return t.parsed.y!==null&&(a+=`: ${x(`${t.parsed.y}`,{type:"number",dps:e.dps,meta:r==null?void 0:r.meta})}`),a}}},legend:{display:e.showLegend,position:"bottom",labels:{usePointStyle:true,boxHeight:10}}}}}function w(e,t){const{theme:a}=e;return{datasets:e.metrics.map(((s,r)=>({label:s.title,data:(t==null?void 0:t.map((t=>({x:t[e.xAxis.name],y:parseFloat(t[s.name])||0}))))||[],backgroundColor:C(a.charts.colors[r],.8)})))}}const A={name:"ScatterChart",label:"Scatter chart",classNames:["inside-card"],category:"Charts: essentials",inputs:[{name:"ds",type:"dataset",label:"Dataset",description:"Dataset",defaultValue:false,category:"Chart data"},{name:"xAxis",type:"dimension",label:"X-Axis",config:{dataset:"ds",hideGranularity:true},category:"Chart data"},{name:"metrics",type:"measure",label:"Metrics",array:true,config:{dataset:"ds",hideGranularity:true},category:"Chart data"},{name:"limit",type:"number",label:"Limit results",category:"Chart data"},{name:"granularity",type:"granularity",label:"Granularity",defaultValue:"week",category:"Variables to configure"},{name:"title",type:"string",label:"Title",description:"The title for the chart",category:"Chart settings"},{name:"description",type:"string",label:"Description",description:"The description for the chart",category:"Chart settings"},{name:"showLegend",type:"boolean",label:"Show Legend",category:"Chart settings",defaultValue:true},{name:"showLabels",type:"boolean",label:"Show Labels",category:"Chart settings",defaultValue:false},{name:"reverseXAxis",type:"boolean",label:"Reverse X Axis",category:"Chart settings",defaultValue:false},{name:"xAxisTitle",type:"string",label:"X-Axis Title",category:"Chart settings"},{name:"yAxisTitle",type:"string",label:"Y-Axis Title",category:"Chart settings"},{name:"yAxisMin",type:"number",label:"Y-Axis minimum value",category:"Chart settings"},{name:"dps",type:"number",label:"Decimal Places",category:"Formatting"},{name:"enableDownloadAsCSV",type:"boolean",label:"Show download as CSV",category:"Export options",defaultValue:true},{name:"enableDownloadAsPNG",type:"boolean",label:"Show download as PNG",category:"Export options",defaultValue:true}]},D=t(v,A,{props:t=>{var a;const s=[];s.push({property:t.xAxis,direction:"desc"});const r=t.xAxis.nativeType==="time";return{...t,reverseXAxis:t.reverseXAxis,isTimeDimension:r,results:r?e({from:t.ds,orderBy:s,select:[{dimension:(a=t.xAxis)==null?void 0:a.name,granularity:t.granularity},t.metrics],limit:t.limit||50}):e({from:t.ds,select:[t.xAxis,t.metrics],limit:t.limit||50})}}});export{D as default,A as meta};
//# sourceMappingURL=p-KsxxjePX.js.map