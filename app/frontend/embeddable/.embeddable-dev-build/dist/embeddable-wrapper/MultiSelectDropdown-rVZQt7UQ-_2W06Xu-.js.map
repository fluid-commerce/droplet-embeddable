{"version":3,"file":"MultiSelectDropdown-rVZQt7UQ-_2W06Xu-.js","sources":["../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/controls/MultiSelectDropdown/MultiSelectDropdown.emb.ts","../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/controls/MultiSelectDropdown/index.tsx"],"sourcesContent":["import { DimensionOrMeasure, OrderBy, OrderDirection, Value, loadData } from '@embeddable.com/core';\nimport { EmbeddedComponentMeta, Inputs, defineComponent } from '@embeddable.com/react';\n\nimport Component, { Props } from './index';\n\nexport const meta = {\n  name: 'MultiSelectDropdown',\n  label: 'Multi-Select dropdown',\n  defaultWidth: 300,\n  defaultHeight: 80,\n  classNames: ['on-top'],\n  category: 'Controls: inputs & dropdowns',\n  inputs: [\n    {\n      name: 'ds',\n      type: 'dataset',\n      label: 'Dataset',\n      description: 'Dataset',\n      category: 'Dropdown values',\n    },\n    {\n      name: 'property',\n      type: 'dimension',\n      label: 'Property',\n      config: {\n        dataset: 'ds',\n      },\n      category: 'Dropdown values',\n    },\n    {\n      name: 'sortBy',\n      type: 'dimensionOrMeasure',\n      label: 'Optional Sort By Additional Dimension or Measure',\n      config: {\n        dataset: 'ds',\n      },\n      category: 'Dropdown values',\n    },\n    {\n      name: 'sortByDirection',\n      type: 'string',\n      label: 'Sort By Direction (asc/desc)',\n      defaultValue: 'asc',\n      category: 'Dropdown values',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      label: 'Title',\n      category: 'Settings',\n    },\n    {\n      name: 'defaultValue',\n      type: 'string',\n      array: true,\n      label: 'Default value',\n      category: 'Pre-configured variables',\n    },\n    {\n      name: 'placeholder',\n      type: 'string',\n      label: 'Placeholder',\n      defaultValue: 'Select...',\n      category: 'Settings',\n    },\n    {\n      name: 'limit',\n      type: 'number',\n      label: 'Default number of options',\n      defaultValue: 100,\n      category: 'Settings',\n    },\n  ],\n  events: [\n    {\n      name: 'onChange',\n      label: 'Change',\n      properties: [\n        {\n          name: 'value',\n          type: 'string',\n          array: true,\n        },\n      ],\n    },\n  ],\n  variables: [\n    {\n      name: 'dropdown choices',\n      type: 'string',\n      defaultValue: Value.noFilter(),\n      array: true,\n      inputs: ['defaultValue'],\n      events: [{ name: 'onChange', property: 'value' }],\n    },\n  ],\n} as const satisfies EmbeddedComponentMeta;\n\nexport default defineComponent<Props, typeof meta, { search: string }>(Component, meta, {\n  props: (inputs: Inputs<typeof meta>, [embState]) => {\n    if (!inputs.ds)\n      return {\n        ...inputs,\n        options: [] as never,\n      };\n\n    const orderProp: OrderBy[] = [];\n    let sortByDirection = 'asc' as OrderDirection;\n    if (inputs.sortByDirection === 'desc' || inputs.sortByDirection === 'asc') {\n      sortByDirection = inputs.sortByDirection as OrderDirection;\n    }\n    const sortDirection = sortByDirection;\n\n    if (inputs.sortBy) {\n      orderProp.push({\n        property: inputs.sortBy,\n        direction: sortDirection,\n      });\n    }\n\n    const select: DimensionOrMeasure[] = inputs.property ? [inputs.property] : [];\n    if (inputs.sortBy && inputs.sortBy !== inputs.property) {\n      select.push(inputs.sortBy);\n    }\n\n    return {\n      ...inputs,\n      options: loadData({\n        from: inputs.ds,\n        select,\n        limit: inputs.limit || 1000,\n        orderBy: orderProp,\n        filters:\n          embState?.search && inputs.property\n            ? [\n                {\n                  operator: 'contains',\n                  property: inputs.property,\n                  value: embState?.search,\n                },\n              ]\n            : undefined,\n      }),\n    };\n  },\n  events: {\n    onChange: (value) => {\n      return {\n        value: value.length ? value : Value.noFilter(),\n      };\n    },\n  },\n});\n","import { DataResponse } from '@embeddable.com/core';\nimport { useEmbeddableState } from '@embeddable.com/react';\nimport React, {\n  ReactNode,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { twMerge } from 'tailwind-merge';\n\nimport Checkbox from '../../../icons/Checkbox';\nimport CheckboxEmpty from '../../../icons/CheckboxEmpty';\nimport Container from '../../Container';\nimport Spinner from '../../Spinner';\nimport { ChevronDown, ClearIcon } from '../../icons';\n\nexport type Props = {\n  className?: string;\n  options: DataResponse;\n  unclearable?: boolean;\n  onChange: (v: string[]) => void;\n  searchProperty?: string;\n  minDropdownWidth?: number;\n  property?: { name: string; title: string; nativeType: string; __type__: string };\n  title?: string;\n  defaultValue?: string[];\n  placeholder?: string;\n  ds?: { embeddableId: string; datasetId: string; variableValues: Record };\n};\n\ntype Record = { [p: string]: string };\n\nlet debounce: number | undefined = undefined;\n\nexport default (props: Props) => {\n  const ref = useRef<HTMLInputElement | null>(null);\n\n  const [focus, setFocus] = useState(false);\n  const [isDropdownOrItemFocused, setIsDropdownOrItemFocused] = useState(false);\n  const [search, setSearch] = useState('');\n  const [triggerBlur, setTriggerBlur] = useState(false);\n  const [value, setValue] = useState(props.defaultValue);\n\n  const [_, setServerSearch] = useEmbeddableState({\n    [props.searchProperty || 'search']: '',\n  }) as [Record, (f: (m: Record) => Record) => void];\n\n  useEffect(() => {\n    setValue(props.defaultValue);\n  }, [props.defaultValue]);\n\n  // Accessibility - Close the menu if we've tabbed off of any items it contains\n  useEffect(() => {\n    let timeoutId: NodeJS.Timeout | null = null;\n\n    if (!isDropdownOrItemFocused) {\n      timeoutId = setTimeout(() => {\n        setFocus(false);\n      }, 200);\n    } else {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    }\n\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [isDropdownOrItemFocused]);\n\n  useLayoutEffect(() => {\n    if (!triggerBlur) return;\n\n    const timeout = setTimeout(() => {\n      setFocus(false);\n      setTriggerBlur(false);\n    }, 500);\n\n    return () => clearTimeout(timeout);\n  }, [triggerBlur]);\n\n  const performSearch = useCallback(\n    (newSearch: string) => {\n      setSearch(newSearch);\n\n      clearTimeout(debounce);\n\n      debounce = window.setTimeout(() => {\n        setServerSearch((s) => ({ ...s, [props.searchProperty || 'search']: newSearch }));\n      }, 500);\n    },\n    [setSearch, setServerSearch, props.searchProperty],\n  );\n\n  const set = useCallback(\n    (newValue: string) => {\n      performSearch('');\n\n      let newValues: string[] = [];\n\n      if (newValue !== '') {\n        newValues = value || [];\n        if (newValues?.includes(newValue)) {\n          newValues = newValues.filter((v) => v !== newValue);\n        } else {\n          newValues = [...newValues, newValue];\n        }\n      }\n\n      props.onChange(newValues);\n      setValue(newValues);\n      setServerSearch((s) => ({ ...s, [props.searchProperty || 'search']: '' }));\n      clearTimeout(debounce);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [performSearch, props, value],\n  );\n\n  // Used for handling keydown events on the menu items\n  const handleKeyDownCallback = (\n    e: React.KeyboardEvent<HTMLElement>,\n    callback: any,\n    escapable?: boolean,\n  ) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      callback(e);\n    }\n    if (escapable && e.key === 'Escape') {\n      e.preventDefault();\n      setFocus(false);\n      setTriggerBlur(true);\n    }\n  };\n\n  const list = useMemo(\n    () =>\n      props.options?.data?.reduce((memo, o, i: number) => {\n        memo.push(\n          <div\n            key={i}\n            onClick={() => {\n              setFocus(true);\n              set(o[props.property?.name || ''] || '');\n            }}\n            onKeyDown={(e) =>\n              handleKeyDownCallback(e, () => set(o[props.property?.name || ''] || ''), true)\n            }\n            onFocus={() => {\n              setIsDropdownOrItemFocused(true);\n              setFocus(true);\n            }}\n            className={`flex items-center min-h-[36px] w-full px-3 py-2 hover:bg-black/5 cursor-pointer font-normal gap-1 ${\n              value?.includes(o[props.property?.name || '']) ? 'bg-black/5' : ''\n            }`}\n            tabIndex={0}\n          >\n            {value?.includes(o[props.property?.name || '']) ? (\n              <div className={`w-[16px] h-[16px] inline-block`}>\n                <Checkbox />\n              </div>\n            ) : (\n              <div className={`w-[16px] h-[16px] inline-block`}>\n                <CheckboxEmpty />\n              </div>\n            )}\n            <div className={`block w-full truncate`}>\n              {o[props.property?.name || '']}\n              {o.note && (\n                <span className=\"font-normal ml-auto pl-3 text-xs opacity-70\">{o.note}</span>\n              )}\n            </div>\n          </div>,\n        );\n\n        return memo;\n      }, []),\n    [props, value, set],\n  ) as ReactNode[];\n\n  return (\n    <Container title={props.title}>\n      <div\n        className={twMerge(\n          `\n            border\n            flex\n            h-10\n            items-center\n            min-w-[50px]\n            relative\n            w-full\n            bg-[color:--embeddable-controls-backgrounds-colors-soft]\n            border-[color:--embeddable-controls-borders-colors-normal]\n            rounded-[--embeddable-controls-borders-radius]\n            `,\n          props.className,\n        )}\n      >\n        <input\n          ref={ref}\n          value={search}\n          name=\"dropdown\"\n          placeholder={props.placeholder}\n          onClick={() => {\n            setFocus(true);\n            setTriggerBlur(false);\n          }}\n          onFocus={() => {\n            setFocus(true);\n            setTriggerBlur(false);\n            setIsDropdownOrItemFocused(true);\n          }}\n          onBlur={() => {\n            setIsDropdownOrItemFocused(false);\n          }}\n          onChange={(e) => performSearch(e.target.value)}\n          className={`\n            border-0\n            cursor-pointer\n            h-9\n            leading-9\n            outline-none\n            px-3\n            text-sm ${focus || !value ? '' : 'opacity-0'}\n            w-full\n            rounded-[--embeddable-controls-borders-radius]\n            bg-[color:--embeddable-controls-backgrounds-colors-transparent]\n          `}\n        />\n\n        {!!value && (\n          <span\n            className={`\n              absolute\n              block\n              h-8\n              leading-8\n              left-3\n              overflow-hidden\n              pointer-events-none\n              text-sm\n              top-1\n              truncate\n              w-[calc(100%-2rem)]\n              whitespace-nowrap\n              bg-[color:--embeddable-controls-backgrounds-colors-soft]\n              border-[color:--embeddable-controls-borders-colors-normal]\n              rounded-[--embeddable-controls-borders-radius]\n              ${focus ? 'hidden' : ''}\n            `}\n          >\n            Selected {value.length} {value.length === 1 ? 'option' : 'options'}\n          </span>\n        )}\n\n        {focus && (\n          <div\n            style={{ minWidth: props.minDropdownWidth }}\n            className={`\n              absolute\n              border\n              flex\n              flex-col\n              max-h-[400px]\n              overflow-x-hidden\n              overflow-y-auto\n              top-11\n              w-full\n              z-50\n              bg-[color:--embeddable-controls-backgrounds-colors-soft]\n              rounded-[--embeddable-controls-borders-radius]\n            `}\n            onFocus={() => {\n              setIsDropdownOrItemFocused(true);\n            }}\n            onBlur={() => {\n              setIsDropdownOrItemFocused(false);\n            }}\n            tabIndex={0}\n          >\n            {list}\n            {list?.length === 0 && !!search && (\n              <div className=\"px-3 py-2 text-black/50 italic cursor-pointer\">No results</div>\n            )}\n          </div>\n        )}\n\n        {props.options.isLoading ? (\n          <Spinner show className=\"absolute right-2 top-2 z-1 pointer-events-none\" />\n        ) : (\n          <ChevronDown className=\"absolute right-2.5 top-2.5 z-1 pointer-events-none\" />\n        )}\n\n        {!props.unclearable && !!value && (\n          <div\n            onClick={() => {\n              set('');\n            }}\n            className=\"absolute right-10 top-0 h-10 flex items-center z-10 cursor-pointer\"\n          >\n            <ClearIcon />\n          </div>\n        )}\n      </div>\n    </Container>\n  );\n};\n"],"names":["value","Value","embState","inputs","orderProp","select","loadData","sortDirection","sortByDirection","MultiSelectDropdown_emb","defineComponent","Component","meta","ClearIcon","set","jsx","props","Spinner","ChevronDown","list","search","setIsDropdownOrItemFocused","jsxs","focus","e","performSearch","setFocus","setTriggerBlur","ref","twMerge","Container","memo","i","o","_c","_b","Checkbox","CheckboxEmpty","_a","handleKeyDownCallback","useMemo","callback","escapable","newValue","newValues","v","setValue","setServerSearch","s","debounce","useCallback","F","setSearch","h","newSearch","triggerBlur","timeout","isDropdownOrItemFocused","useLayoutEffect","timeoutId","useEffect","T","useRef","useState","_","useEmbeddableState"],"mappings":";;;;;;;;;ACmCA,IAAIiD,CAAJ;AAEA,MAAAtC,CAAA,GAAe,CAACK,CAAhB,KAAiC;AACjC,EAAA,MAAQY,CAAR,GAAckC,YAAd,CAAcA,MAAd,CAA8C,IAAI,CAAlD,EAEQ,CAACvC,CAFT,EAEgBG,CAAQ,CAFxB,GAE4BqC,YAF5B,CAAA,QAAA,CAEqC,KAAK,CAF1C,EAGQ,CAACN,CAHT,EAGkCpC,CAA0B,CAH5D,GAGgE0C,YAHhE,CAGgEA,QAHhE,CAGyE,KAAK,CAH9E,EAIQ,CAAC3C,EAJT,EAIiBgC,CAAS,CAJ1B,GAI8BW,YAJ9B,CAI8BA,QAJ9B,CAIuC,EAAE,CAJzC,EAKQ,CAACR,CALT,EAKsB5B,CAAc,CALpC,GAKwCoC,YALxC,CAAA,QAAA,CAKiD,KAAK,CALtD,EAMQ,CAAC/D,CANT,EAMgB8C,CAAQ,CANxB,GAM4BiB,YAN5B,CAM4BA,QAN5B,CAMqC/C,CANrC,CAM2C,YAAY,CANvD,EAQQ,CAACgD,CART,EAQYjB,GAAe,CAR3B,GAQ+BkB,kBAR/B,CAQkD;AAAA,IAC9C,CAACjD,CATL,CASW,cATX,IAS6B,QAAQ,GAAG;AAAA,GACrC,CAFH;AAIE4C,EAAFC,YAAAA,CAAED,SAAFC,CAAY,MAAM;AACdf,IAAJ,CAAA,CAAa9B,CAAb,CAAmB,YAAY,CAA/B;AAA+B,GAA/B,EACK,CAACA,CADN,CACY,YAAY,CAAC,CADzB,EAIE4C,YAJF,CAIEA,SAJF,CAIY,MAAM;AAClB,IAAA,IAAQD,EAAR,GAA2C,IAA3C;AAEA,IAAA,OAASF,CAAT,GAKUE,EALV,IAMQ,YANR,CAMqBA,EAAS,CAN9B,GACMA,EADN,GACkB,UADlB,CAC6B,MAAM;AAC3BjC,MAAR,CAAA,CAAiB,KAAK,CAAtB;AAAsB,KAAtB,EACS,GAAG,CADZ,EAQW,MAAM;AACPiC,MAAAA,EAAV,IACQ,YADR,CACqBA,EAAS,CAD9B;AAC8B,KAD9B;AAEM,GADN,EAGK,CAACF,CAAuB,CAAC,CAH9B,EAKEC,YALF,CAKEA,eALF,CAKkB,MAAM;AACxB,IAAA,IAAQ,CAACH,CAAT,EAAA;AAEA,IAAA,MAAUC,EAAV,GAAoB,UAApB,CAA+B,MAAM;AAC/B9B,MAAN,CAAA,CAAe,KAAK,CAApB,EACMC,CADN,CACqB,KAAK,CAD1B;AAC0B,KAD1B,EAEO,GAAG,CAFV;AAIA,IAAA,OAAW,MAAM,YAAjB,CAA8B6B,EAAO,CAArC;AAAqC,GAArC,EACK,CAACD,CAAW,CAAC,CADlB;AAGA,EAAA,MAAQ9B,CAAR,GAAwByB,YAAxB,CAAwBA,WAAxB;AAAwBA,IACpB,CAACI,EADLH,KAC2B;AACrBC,MAAN,CAAA,CAAgBE,EAAS,CAAzB,EAEM,YAFN,CAEmBL,CAAQ,CAF3B,EAIMA,CAJN,GAIiB,MAJjB,CAIwB,UAJxB,CAImC,MAAM;AACjCF,QAARM,GAAAA,CAAwB,CAACL,CAAzBK,MAAgC,EAAE,GAAGL,CAArCK,EAAwC,CAACrC,CAAzCqC,CAA+C,cAA/CA,IAAiE,QAAQ,GAAGC,EAA5ED,EAAAA,CAAwF,CAAxFA;AAAwF,OAAxF,EACS,GAAG,CADZ;AACY,KADZ;AACY,IAER,CAACD,CAFL,EAEgBL,GAFhB,EAEiC/B,CAFjC,CAEuC,cAAc;AAAA,GAFrD,EAKQF,CALR,GAKcoC,YALd,CAKcA,WALd;AAKcA,IACV,CAACP,EAJLQ,KAI0B;AACpB1B,MAAN,CAAA,CAAoB,EAAE,CAAtB;AAEA,MAAA,IAAUmB,CAAV,GAAgC,EAAhC;AAEUD,MAAAA,EAAV,KAAuB,EAAvB,KACQC,CADR,GACoB5C,CADpB,IAC6B,EAD7B,EAEY4C,CAFZ,IAEY,IAFZ,IAEYA,CAFZ,CAEuB,QAFvB,CAEgCD,EAFhC,CAAA,GAGUC,CAHV,GAGsBA,CAHtB,CAGgC,MAHhC,CAGuC,CAACC,CAHxC,KAG8CA,CAH9C,KAGoDF,EAAQ,CAH5D,GAKUC,CALV,GAKsB,CAAC,GAAGA,CAL1B,EAKqCD,EAAQ,CAL7C,CAAA,EASM3B,CATN,CASY,QATZ,CASqB4B,CAAS,CAT9B,EAUME,CAVN,CAUeF,CAAS,CAVxB,EAWMG,GAXN,CAWsB,CAACC,CAXvB,MAW8B,EAAE,GAAGA,CAXnC,EAWsC,CAAChC,CAXvC,CAW6C,cAX7C,IAW+D,QAAQ,GAAG,EAX1E,EAAA,CAW+E,CAX/E,EAYM,YAZN,CAYmBiC,CAAQ,CAZ3B;AAY2B,KAZ3B;AAY2B;AAAA,IAGvB,CAACxB,CAHL,EAGoBT,CAHpB,EAG2BhB,CAAK;AAAA,GAHhC,EAOQuC,CAPR,GAOgC,CAC5Bf,EARJ,EASIiB,CATJ,EAUIC,CAVJ,KAWO;AACP,IAAA,CAAQlB,EAAR,CAAU,GAAV,KAAkB,OAAlB,IAA6BA,EAA7B,CAA+B,GAA/B,KAAuC,GAAvC,MACMA,EADN,CACQ,cADR,EAAA,EAEMiB,CAFN,CAEejB,EAAC,CAFhB,CAAA,EAIqBA,EAJrB,CAIuB,GAJvB,KAI+B,QAJ/B,KAKMA,EALN,CAKQ,cALR,EAAA,EAMME,CANN,CAMe,KAAK,CANpB,EAOMC,CAPN,CAOqB,IAAI,CAPzB,CAAA;AAOyB,GAPzB,EAWQR,CAXR,GAWeqB,YAXf,CAWeA,OAXf;AAWeA,IACX,MAAA;;AACJ,MAAA,OAAA,CAAML,CAAN,GAAA,CAAMG,GAAN,GAAMtB,CAAN,CAAY,OAAZ,KAAM,IAAN,GAAA,KAAA,CAAA,GAAMsB,GAAN,CAAqB,IAArB,KAAM,IAAN,GAAA,KAAA,CAAA,GAAMH,CAAN,CAA2B,MAA3B,CAAkC,CAACJ,CAAnC,EAAyCE,CAAzC,EAA4CD,CAA5C,KAA0D;;AAC1D,QAAA,OAAQD,CAAR,CAAa,IAAb;AAAa,0BAAb,CAAA,CACUT,IADV;AACUA,YAAC,KADX;AACW,YAAA;AAAA,cAEC,OAFZ,EAEqB,MAAM;;AACbI,gBAAd,CAAA,CAAuB,IAAI,CAA3B,EACcZ,CADd,CACkBmB,CADlB,CAAA,CAAA,CACoBK,CADpB,GACoBtB,CADpB,CAC0B,QAD1B,KACoB,IADpB,GAAA,KAAA,CAAA,GACoBsB,CADpB,CACoC,IADpC,KAC4C,EAAE,CAD9C,IACmD,EAAE,CADrD;AACqD,eADrD;AACqD,cAEzC,SAFZ,EAEuB,CAACd,CAFxB,KAGce,CAHd,CAGoCf,CAHpC,EAGuC,MAAA;;AAAvC,gBAAA,OAA6CV,CAA7C,CAAiDmB,CAAjD,CAAA,CAAA,CAAmDK,CAAnD,GAAmDtB,CAAnD,CAAyD,QAAzD,KAAmD,IAAnD,GAAA,KAAA,CAAA,GAAmDsB,CAAnD,CAAmE,IAAnE,KAA2E,EAAE,CAA7E,IAAkF,EAAE,CAApF;AAAoF,eAAO,CAA3F;AAA2F,cAE/E,OAFZ,EAEqB,MAAM;AACbjB,gBAAd,CAAA,CAAyC,IAAI,CAA7C,EACcK,CADd,CACuB,IAAI,CAD3B;AAC2B,eAD3B;AAC2B,cAEf,SAFZ,EAEuB,CAFvB,kGAAA,EAGc1B,CAHd,IAGc,IAHd,IAGcA,CAHd,CAGqB,QAHrB,CAG8BiC,CAH9B,CAAA,CAAA,CAGgCK,CAHhC,GAGgCtB,CAHhC,CAGsC,QAHtC,KAGgC,IAHhC,GAAA,KAAA,CAAA,GAGgCsB,CAHhC,CAGgD,IAHhD,KAGwD,EAAE,CAH1D,CAAA,GAG+D,YAH/D,GAG8E,EAClE,CAJZ,CAAA;AAIY,cACA,QALZ,EAKsB,CALtB;AAKsB,cAET,QAHb,EAGa;AAAA,gBAAAtC,CAFb,IAEa,IAFb,IAEaA,CAFb,CAEoB,QAFpB,CAE6BiC,CAF7B,CAAA,CAAA,CAE+BE,GAF/B,GAE+BnB,CAF/B,CAEqC,QAFrC,KAE+B,IAF/B,GAEA,KAFA,CAAA,GAE+BmB,GAF/B,CAE+C,IAF/C,KAEuD,EAAE,CAAzD,CAFA,mBAAA,CAAA,CAGcpB,GAHd,CAGe,KAHf,EAGe,EAAI,SAHnB,EAG8B,gCAH9B,EAIgB,QAJhB,kBAAA,CAAA,CAEA,GAFA,CAIiBqB,CAJjB,EAIiB,EAAS,CAJ1B,EAKc,CALd,mBAAA,CAAA,CAOcrB,GAPd,CAOe,KAPf,EAEA,EAKmB,SAPnB,EAO8B,gCAP9B,EAQgB,QARhB,kBAAA,CAAA,CAQgBA,GARhB,CAQiBsB,CARjB,EAQiB,EAAc,CAR/B,EASc,CATd;AASc,gCAPd,CAAA,CASYf,IATZ,CASa,KATb,EASa,EAAI,SATjB,EAS4B,uBAT5B,EAUe,QAVf,EAUe;AAAA,kBAAAW,CAHf,CAAA,CAAA,CAGiBC,CAHjB,GAGiBlB,CAHjB,CAGuB,QAHvB,KAGiB,IAHjB,GAGA,KAHA,CAAA,GAGiBkB,CAHjB,CAGiC,IAHjC,KAGyC,EAAE,CAH3C;AAG2C,kBAC5BD,CADf,CACiB,IADjB,oBAAA,CAAA,CAEgBlB,GAFhB,CAEiB,MAFjB,EAAA,EAEsB,SAFtB,EAEgC,6CAFhC,EAE+E,QAF/E,EAAA,CAAA,CAEiF,IAFjF,EAEsF;AAAA,iBAFtF,EAIY;AAAA;AAAA,aAAZ;AAAY,YA/BKiB;AAAAA;AAAA,SAAjB,EAmCeD,CAnCf;AAmCeA,OAnCf,EAoCS,EADT,CAnCA;AAmCA,KAAA;IAEI,CAACf,GAAOhB,GAAOc,CAAG;AAAA,GAAtB;AAGA,EAAA,uBAAA,CAAA,CACIC,GADJ,CACKe,EADL,EACK,EAAU,KADf,EACsBd,CADtB,CAC4B,KAD5B,EAEM,QAFN,kBAAA,CAAA,CAEMM,IAFN;AAEMA,IAAC,KAFP;AAEO,IAAA;AAAA,MACC,SADR,EACmBO,EADnB;AACmBA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADV,CAAA;AACU,QAYAb,CAbV,CAagB;AAAA,OAZhB;AAYgB,MAGR,QAHR,EAGQ;AAAA,wBAHR,CAAA,CAGQD,GAHR;AAGQA,UAAC,OAAT;AAAS,UAAA;AAAA,YACC,GADV,EACUa,CADV;AACUA,YACA,KAFV,EAEiBR,EAFjB;AAEiBA,YACP,IAFV,EAEe,UAFf;AAEe,YACL,WAFV,EAEuBJ,CAFvB,CAE6B,WAF7B;AAE6B,YACnB,OAFV,EAEmB,MAAM;AACbU,cAAZ,CAAA,CAAqB,IAAI,CAAzB,EACYC,CADZ,CAC2B,KAAK,CADhC;AACgC,aADhC;AACgC,YAEtB,OAFV,EAEmB,MAAM;AACbD,cAAZ,CAAA,CAAqB,IAAI,CAAzB,EACYC,CADZ,CAC2B,KAAK,CADhC,EAEYN,CAFZ,CAEuC,IAAI,CAF3C;AAE2C,aAF3C;AAE2C,YAEjC,MAFV,EAEkB,MAAM;AACZA,cAAZ,CAAA,CAAuC,KAAK,CAA5C;AAA4C,aAA5C;AAA4C,YAElC,QAFV,EAEoB,CAACG,EAFrB,KAE2BC,CAF3B,CAEyCD,EAFzC,CAE2C,MAF3C,CAEkD,KAAK,CAFvD;AAEuD,YAC7C,SAHV,EAGqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADrB,EAQsBD,CARtB,IAQ+B,CAACvB,CARhC,GAQwC,EARxC,GAQ6C,WAAW;AAAA;AAAA;AAAA;AAAA,UAPxD;AAOwD;AAAA,SAAxD;AAAwD,QAO/C,CAAC,CAACA,CAPX,oBAAA,CAAA,CAQUsB,IARV;AAQUA,UAAC,MARX;AAQW,UAAA;AAAA,YACC,SADZ,EACuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADvB,EAiBgBC,CAjBhB,GAiBwB,QAjBxB,GAiBmC,EAAE;AAAA,YAhBrC,CAAA;AAgBqC,YAE1B,QAlBX,EAkBW;AAAA,cAAA,WAFX;AAEW,cACWvB,CADtB,CAC4B,MAD5B;AAC4B,cAAO,GADnC;AACmC,cAAEA,CAArC,CAA2C,MAA3C,KAAsD,CAAtD,GAA0D,QAA1D,GAAqE;AAAA;AAAA;AAAA,SAArE;AAAqE,QAI5DuB,CAJT,oBAAA,CAAA,CAKUD,IALV;AAKUA,UAAC,KALX;AAKW,UAAA;AAAA,YACC,KADZ,EACmB,EAAE,QADrB,EAC+BN,CAD/B,CACqC,gBADrC,EAAA;AAAA,YAEY,SAFZ,EAEuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADvB,CAAA;AACuB,YAcX,OAfZ,EAeqB,MAAM;AACbK,cAAd,CAAA,CAAyC,IAAI,CAA7C;AAA6C,aAA7C;AAA6C,YAEjC,MAFZ,EAEoB,MAAM;AACZA,cAAd,CAAA,CAAyC,KAAK,CAA9C;AAA8C,aAA9C;AAA8C,YAElC,QAFZ,EAEsB,CAFtB;AAEsB,YAET,QAJb,EAIa;AAAA,cAAAF,CAFb;AAEaA,cAAb,CACaA,CADb,IACa,IADb,GAAA,KAAA,CAAA,GACaA,CADb,CACmB,MADnB,MAC8B,CAD9B,IACmC,CAAC,CAACC,EADrC,oBAAA,CAAA,CAEcL,GAFd,CAEe,KAFf,EAEe,EAAI,SAFnB,EAE6B,+CAF7B,EAE6E,QAF7E,EAE6E,YAF7E,EAEuF;AAAA;AAAA;AAAA,SAAvF;AAAuF,QAK9EC,CALT,CAKe,OALf,CAKuB,SALvB,mBAAA,CAAA,CAMUD,GANV,CAMWE,EANX,EAMW,EAAQ,IANnB,EAMuB,IANvB,EAMwB,SANxB,EAMkC,gDANlC,EAMmF,CANnF,mBAAA,CAAA,CAQUF,GARV,CAQWG,EARX,EAQW,EAAY,SARvB,EAQiC,oDARjC,EAQsF,CARtF;AAQsF,QAG7E,CAACF,CAXV,CAWgB,WAXhB,IAW+B,CAAC,CAAChB,CAXjC,oBAAA,CAAA,CAYUe,GAZV;AAYUA,UAAC,KAJX;AAIW,UAAA;AAAA,YACC,OADZ,EACqB,MAAM;AACbD,cAAd,CAAA,CAAkB,EAAE,CAApB;AAAoB,aAApB;AAAoB,YAER,SAFZ,EAEsB,oEAFtB;AAEsB,YAEV,QAJZ,kBAAA,CAAA,CAEA,GAFA,CAIaD,EAJb,EAIa,EAAU;AAAA;AAAA;AAAA;AAAA;AACb,GAAV,EAGI,CAHJ;AAKA,CAAA,CAAA,CDnTaD,CCmTb,GDnToB;AAAA,EAClB,ICkTF,EDlTQ,qBCkTR;ADlTQ,EACN,KAFF,EAES,uBAFT;AAES,EACP,YAFF,EAEgB,GAFhB;AAEgB,EACd,aAFF,EAEiB,EAFjB;AAEiB,EACf,UAFF,EAEc,CAAC,QAAQ,CAFvB;AAEuB,EACrB,QAFF,EAEY,8BAFZ;AAEY,EACV,MAFF,EAEU;AAAA,IACN;AAAA,MACE,IAFN,EAEY,IAFZ;AAEY,MACN,IAFN,EAEY,SAFZ;AAEY,MACN,KAFN,EAEa,SAFb;AAEa,MACP,WAFN,EAEmB,SAFnB;AAEmB,MACb,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,UAHZ;AAGY,MACN,IAFN,EAEY,WAFZ;AAEY,MACN,KAFN,EAEa,UAFb;AAEa,MACP,MAFN,EAEc;AAAA,QACN,OAFR,EAEiB;AAAA,OADjB;AACiB,MAEX,QAFN,EAEgB;AAAA,KAFhB;AAEgB,IAEZ;AAAA,MACE,IAHN,EAGY,QAHZ;AAGY,MACN,IAFN,EAEY,oBAFZ;AAEY,MACN,KAFN,EAEa,kDAFb;AAEa,MACP,MAFN,EAEc;AAAA,QACN,OAFR,EAEiB;AAAA,OADjB;AACiB,MAEX,QAFN,EAEgB;AAAA,KAFhB;AAEgB,IAEZ;AAAA,MACE,IAHN,EAGY,iBAHZ;AAGY,MACN,IAFN,EAEY,QAFZ;AAEY,MACN,KAFN,EAEa,8BAFb;AAEa,MACP,YAFN,EAEoB,KAFpB;AAEoB,MACd,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,OAHZ;AAGY,MACN,IAFN,EAEY,QAFZ;AAEY,MACN,KAFN,EAEa,OAFb;AAEa,MACP,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,cAHZ;AAGY,MACN,IAFN,EAEY,QAFZ;AAEY,MACN,KAFN,EAEa,IAFb;AAEa,MACP,KAFN,EAEa,eAFb;AAEa,MACP,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,aAHZ;AAGY,MACN,IAFN,EAEY,QAFZ;AAEY,MACN,KAFN,EAEa,aAFb;AAEa,MACP,YAFN,EAEoB,WAFpB;AAEoB,MACd,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,OAHZ;AAGY,MACN,IAFN,EAEY,QAFZ;AAEY,MACN,KAFN,EAEa,2BAFb;AAEa,MACP,YAFN,EAEoB,GAFpB;AAEoB,MACd,QAFN,EAEgB;AAAA;AAAA,GAAhB;AAAgB,EAGd,MAHF,EAGU;AAAA,IACN;AAAA,MACE,IAFN,EAEY,UAFZ;AAEY,MACN,KAFN,EAEa,QAFb;AAEa,MACP,UAFN,EAEkB;AAAA,QACV;AAAA,UACE,IAFV,EAEgB,OAFhB;AAEgB,UACN,IAFV,EAEgB,QAFhB;AAEgB,UACN,KAFV,EAEiB;AAAA;AAAA;AAAA;AACT,GAAR;AACM,EAGJ,SAHF,EAGa;AAAA,IACT;AAAA,MACE,IAFN,EAEY,kBAFZ;AAEY,MACN,IAFN,EAEY,QAFZ;AAEY,MACN,YAFN,EAEoBX,IAFpB,CAE0B,QAF1B,EAAA;AACA,MAEM,KAFN,EAEa,IAFb;AAEa,MACP,MAFN,EAEc,CAAC,cAAc,CAF7B;AAE6B,MACvB,MAFN,EAEc,CAAC,EAAE,IAFjB,EAEuB,UAFvB,EAEmC,QAFnC,EAE6C,OAF7C,EAEsD;AAAA;AAAA;AAGtD,CAAA,CAAA,CAEAQ,EAFA,GAEeC,eAFf,CAEuEC,CAFvE,EAEkFC,CAFlF,EAEwF;AAAA,EACtF,KAHF,EAGS,CAACT,CAHV,EAGuC,CAACD,CAAQ,CAHhD,KAGsD;AACtD,IAAA,IAAQ,CAACC,CAAT,CAAgB,EAAhB;AACA,MAAA,OAAa;AAAA,QACL,GAAGA,CADX;AACWA,QACH,OAFR,EAEiB;AAAA,OADjB;AAIA,IAAA,MAAUC,CAAV,GAAiC,EAAjC;AACA,IAAA,IAAQI,CAAR,GAA0B,KAA1B;AACA,IAAA,CAAQL,CAAR,CAAe,eAAf,KAAmC,MAAnC,IAA6CA,CAA7C,CAAoD,eAApD,KAAwE,KAAxE,MACMK,CADN,GACwBL,CADxB,CAC+B,eAD/B,CAAA;AAGA,IAAA,MAAUI,CAAV,GAA0BC,CAA1B;AAEQL,IAAR,CAAA,CAAe,MAAf,IACMC,CADN,CACgB,IADhB,CACqB;AAAA,MACb,QAFR,EAEkBD,CAFlB,CAEyB,MAFzB;AAEyB,MACjB,SAFR,EAEmBI;AAAAA,KACZ,CAFP;AAKA,IAAA,MAAUF,CAAV,GAAyCF,CAAzC,CAAgD,QAAhD,GAA2D,CAACA,CAA5D,CAAmE,QAAQ,CAA3E,GAA+E,EAA/E;AACA,IAAA,OAAQA,CAAR,CAAe,MAAf,IAAyBA,CAAzB,CAAgC,MAAhC,KAA2CA,CAA3C,CAAkD,QAAlD,IACME,CADN,CACa,IADb,CACkBF,CADlB,CACyB,MAAM,CAD/B,EAIW;AAAA,MACL,GAAGA,CALT;AAKSA,MACH,OAFN,EAEeG,CAFf,CAEwB;AAAA,QAChB,IAFR,EAEcH,CAFd,CAEqB,EAFrB;AAEqB,QACb,MAFR,EAEQE,CAFR;AAEQA,QACA,KAFR,EAEeF,CAFf,CAEsB,KAFtB,IAE+B,GAF/B;AAE+B,QACvB,OAFR,EAEiBC,CAFjB;AAEiBA,QACT,OAFR,EAGUF,CAHV,IAGU,IAHV,IAGUA,CAHV,CAGoB,MAHpB,IAG8BC,CAH9B,CAGqC,QAHrC,GAIc;AAAA,UACE;AAAA,YACE,QAFlB,EAE4B,UAF5B;AAE4B,YACV,QAFlB,EAE4BA,CAF5B,CAEmC,QAFnC;AAEmC,YACjB,KAFlB,EAEyBD,CAFzB,IAEyB,IAFzB,GACA,KADA,CAAA,GAEyBA,CAFzB,CAEmC;AAAA;AAAA,SAAnC,GAGc,KAHd;AAGc,OACP;AAAA,KADP;AACO,GAAP;AACI,EAEF,MAHF,EAGU;AAAA,IACN,QAHJ,EAGc,CAACF,CAHf,MAIa;AAAA,MACL,KAHR,EAGeA,CAHf,CAGqB,MAHrB,GAG8BA,CAH9B,GAGsCC,IAHtC,CAG4C,QAH5C;AAEA,KAAA;AAC4C;AAI5C,CAAC;;;;"}