{"version":3,"file":"BarChart-DZctNftw-Bs3Ivcbi.js","sources":["../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/charts/BarChart/BarChart.emb.ts"],"sourcesContent":["import {\n  isDimension,\n  isMeasure,\n  OrderBy,\n  loadData,\n  Measure,\n  Dimension,\n} from '@embeddable.com/core';\nimport { EmbeddedComponentMeta, Inputs, defineComponent } from '@embeddable.com/react';\nimport Component from './index';\n\nexport const meta = {\n  name: 'BarChart',\n  label: 'Bar chart',\n  classNames: ['inside-card'],\n  category: 'Charts: essentials',\n  inputs: [\n    {\n      name: 'ds',\n      type: 'dataset',\n      label: 'Dataset',\n      description: 'Dataset',\n      defaultValue: false,\n      category: 'Chart data',\n    },\n    {\n      name: 'xAxis',\n      type: 'dimension',\n      label: 'X-Axis',\n      required: true,\n      config: {\n        dataset: 'ds',\n      },\n      category: 'Chart data',\n    },\n    {\n      name: 'metrics',\n      type: 'measure',\n      array: true,\n      required: true,\n      label: 'Metrics',\n      config: {\n        dataset: 'ds',\n      },\n      category: 'Chart data',\n    },\n    {\n      name: 'sortBy',\n      type: 'dimensionOrMeasure',\n      label: 'Sort by (optional)',\n      config: {\n        dataset: 'ds',\n      },\n      category: 'Chart data',\n    },\n    {\n      name: 'limit',\n      type: 'number',\n      label: 'Limit results',\n      category: 'Chart data',\n    },\n    {\n      name: 'lineMetrics',\n      type: 'measure',\n      array: true,\n      label: 'Add a line(s)',\n      config: {\n        dataset: 'ds',\n      },\n      category: 'Optional chart data',\n    },\n    {\n      name: 'showSecondYAxis',\n      type: 'boolean',\n      label: 'Show 2nd axis',\n      category: 'Optional chart data',\n      defaultValue: false,\n    },\n    {\n      name: 'secondAxisTitle',\n      type: 'string',\n      label: '2nd axis title',\n      description: 'The title for the chart',\n      category: 'Optional chart data',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      label: 'Title',\n      description: 'The title for the chart',\n      category: 'Chart settings',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      label: 'Description',\n      description: 'The description for the chart',\n      category: 'Chart settings',\n    },\n    {\n      name: 'showLegend',\n      type: 'boolean',\n      label: 'Show Legend',\n      category: 'Chart settings',\n      defaultValue: true,\n    },\n    {\n      name: 'showLabels',\n      type: 'boolean',\n      label: 'Show Labels',\n      category: 'Chart settings',\n      defaultValue: false,\n    },\n    {\n      name: 'displayHorizontally',\n      type: 'boolean',\n      label: 'Display Horizontally',\n      category: 'Chart settings',\n      defaultValue: false,\n    },\n    {\n      name: 'stackMetrics',\n      type: 'boolean',\n      label: 'Stack Metrics',\n      category: 'Chart settings',\n      defaultValue: false,\n    },\n    {\n      name: 'reverseXAxis',\n      type: 'boolean',\n      label: 'Reverse X Axis',\n      category: 'Chart settings',\n      defaultValue: false,\n    },\n    {\n      name: 'xAxisTitle',\n      type: 'string',\n      label: 'X-Axis Title',\n      category: 'Chart settings',\n    },\n    {\n      name: 'yAxisTitle',\n      type: 'string',\n      label: 'Y-Axis Title',\n      category: 'Chart settings',\n    },\n    {\n      name: 'dps',\n      type: 'number',\n      label: 'Decimal Places',\n      category: 'Formatting',\n    },\n    {\n      name: 'enableDownloadAsCSV',\n      type: 'boolean',\n      label: 'Show download as CSV',\n      category: 'Export options',\n      defaultValue: true,\n    },\n    {\n      name: 'enableDownloadAsPNG',\n      type: 'boolean',\n      label: 'Show download as PNG',\n      category: 'Export options',\n      defaultValue: true,\n    },\n  ],\n} as const satisfies EmbeddedComponentMeta;\n\nexport default defineComponent(Component, meta, {\n  props: (inputs: Inputs<typeof meta>, _, clientContext) => {\n    const orderProp: OrderBy[] = [];\n\n    if (inputs.sortBy) {\n      orderProp.push({\n        property: inputs.sortBy,\n        direction: inputs.sortBy.nativeType == 'string' ? 'asc' : 'desc',\n      });\n    } else if (inputs.limit) {\n      orderProp.push({\n        property: inputs.metrics[0],\n        direction: 'desc',\n      });\n    }\n\n    // Allow sorting by any dimension or measure regardless of x-axis\n    const dimensions = [inputs.xAxis];\n    const measures = [...inputs.metrics, ...(inputs.lineMetrics || [])];\n    if (inputs.sortBy && isDimension(inputs.sortBy) && !dimensions.includes(inputs.sortBy)) {\n      dimensions.push(inputs.sortBy as Dimension);\n    }\n    if (inputs.sortBy && isMeasure(inputs.sortBy) && !measures.includes(inputs.sortBy)) {\n      measures.push(inputs.sortBy as Measure);\n    }\n    // No timeDimension logic needed, just ensure select is used\n    return {\n      ...inputs,\n      clientContext,\n      reverseXAxis: inputs.reverseXAxis,\n      results: loadData({\n        from: inputs.ds,\n        select: [...dimensions, ...measures],\n        orderBy: orderProp,\n        limit: inputs.limit || 50,\n      }),\n    };\n  },\n});\n"],"names":["orderProp","inputs","dimensions","measures","loadData","clientContext","isDimension","isMeasure","_","BarChart_emb","defineComponent","Component","meta"],"mappings":"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"}