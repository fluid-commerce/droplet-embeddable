{"version":3,"file":"CompareLineChart-DRJbWwhV-C57yfd9y.js","sources":["../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/charts/CompareLineChart/CompareLineChart.emb.ts","../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/charts/CompareLineChart/index.tsx"],"sourcesContent":["import { OrderBy, loadData } from '@embeddable.com/core';\nimport { EmbeddedComponentMeta, Inputs, defineComponent } from '@embeddable.com/react';\n\nimport Component from './index';\n\nexport const meta = {\n  name: 'CompareLineChart',\n  label: 'Line comparison (time-series)',\n  classNames: ['inside-card'],\n  category: 'Charts: time-series comparison',\n  inputs: [\n    {\n      name: 'ds',\n      type: 'dataset',\n      label: 'Dataset',\n      description: 'Dataset',\n      defaultValue: false,\n      category: 'Chart data',\n    },\n    {\n      name: 'xAxis',\n      type: 'dimension',\n      label: 'X-Axis',\n      config: {\n        dataset: 'ds',\n        supportedTypes: ['time'],\n        hideGranularity: true,\n      },\n      category: 'Chart data',\n    },\n    {\n      name: 'comparisonXAxis',\n      type: 'dimension',\n      label: 'Comparison X-Axis (optional)',\n      config: {\n        dataset: 'ds',\n        supportedTypes: ['time'],\n        hideGranularity: true,\n      },\n      category: 'Chart data',\n    },\n    {\n      name: 'metrics',\n      type: 'measure',\n      array: true,\n      label: 'Metrics',\n      config: {\n        dataset: 'ds',\n      },\n      category: 'Chart data',\n    },\n    {\n      name: 'granularity',\n      type: 'granularity',\n      label: 'Granularity',\n      defaultValue: 'day',\n      category: 'Variables to configure',\n    },\n    {\n      name: 'timeFilter',\n      type: 'timeRange',\n      label: 'Primary date range',\n      description: 'Date range',\n      category: 'Variables to configure',\n    },\n    {\n      name: 'prevTimeFilter',\n      type: 'timeRange',\n      label: 'Comparison date range',\n      description: 'Date range',\n      category: 'Variables to configure',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      label: 'Title',\n      description: 'The title for the chart',\n      category: 'Chart settings',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      label: 'Description',\n      description: 'The description for the chart',\n      category: 'Chart settings',\n    },\n    {\n      name: 'xAxisTitle',\n      type: 'string',\n      label: 'X-Axis Title',\n      category: 'Chart settings',\n    },\n    {\n      name: 'comparisonXAxisTitle',\n      type: 'string',\n      label: 'Comparison X-Axis Title (optional)',\n      description: 'Title for the comparison X-Axis',\n      category: 'Chart settings',\n      defaultValue: '',\n    },\n    {\n      name: 'yAxisTitle',\n      type: 'string',\n      label: 'Y-Axis Title',\n      category: 'Chart settings',\n    },\n    {\n      name: 'showLabels',\n      type: 'boolean',\n      label: 'Show Labels',\n      category: 'Chart settings',\n      defaultValue: false,\n    },\n    {\n      name: 'applyFill',\n      type: 'boolean',\n      label: 'Color fill space under line',\n      category: 'Chart settings',\n      defaultValue: false,\n    },\n    {\n      name: 'yAxisMin',\n      type: 'number',\n      label: 'Y-Axis minimum value',\n      category: 'Chart settings',\n    },\n    {\n      name: 'showLegend',\n      type: 'boolean',\n      label: 'Show Legend',\n      category: 'Chart settings',\n      defaultValue: true,\n    },\n    {\n      name: 'enableDownloadAsCSV',\n      type: 'boolean',\n      label: 'Show download as CSV',\n      category: 'Export options',\n      defaultValue: true,\n    },\n    {\n      name: 'enableDownloadAsPNG',\n      type: 'boolean',\n      label: 'Show download as PNG',\n      category: 'Export options',\n      defaultValue: true,\n    },\n    {\n      name: 'dps',\n      type: 'number',\n      label: 'Decimal Places',\n      category: 'Formatting',\n    },\n  ],\n} as const satisfies EmbeddedComponentMeta;\n\nexport default defineComponent(Component, meta, {\n  props: (inputs: Inputs<typeof meta>) => {\n    const orderProp: OrderBy[] = [];\n\n    orderProp.push({\n      property: inputs.xAxis,\n      direction: 'desc',\n    });\n\n    return {\n      ...inputs,\n      results: loadData({\n        from: inputs.ds,\n        limit: 500,\n        orderBy: orderProp,\n        select: [\n          {\n            dimension: inputs.xAxis?.name,\n            granularity: inputs.granularity,\n          },\n          inputs.metrics,\n        ],\n        filters:\n          inputs.timeFilter && inputs.xAxis\n            ? [\n                {\n                  property: inputs.xAxis,\n                  operator: 'inDateRange',\n                  value: inputs.timeFilter,\n                },\n              ]\n            : undefined,\n      }),\n      prevResults: loadData({\n        from: inputs.ds,\n        select: [\n          {\n            dimension: inputs.xAxis?.name,\n            granularity: inputs.granularity,\n          },\n          inputs.metrics,\n        ],\n        limit: !inputs.prevTimeFilter ? 1 : 500,\n        orderBy: orderProp,\n        filters:\n          inputs.prevTimeFilter && inputs.xAxis\n            ? [\n                {\n                  property: inputs.xAxis,\n                  operator: 'inDateRange',\n                  value: {\n                    from: inputs.prevTimeFilter.from,\n                    relativeTimeString: '',\n                    to: inputs.prevTimeFilter.to,\n                  },\n                },\n              ]\n            : undefined,\n      }),\n    };\n  },\n});\n","import {\n  DataResponse,\n  Dataset,\n  Dimension,\n  Granularity,\n  Measure,\n  TimeRange,\n} from '@embeddable.com/core';\nimport {\n  CategoryScale,\n  ChartData,\n  ChartDataset,\n  Chart as ChartJS,\n  ChartOptions,\n  DefaultDataPoint,\n  Filler,\n  Legend,\n  LineElement,\n  LinearScale,\n  PointElement,\n  Title,\n  Tooltip,\n} from 'chart.js';\nimport 'chart.js/auto';\nimport 'chartjs-adapter-date-fns';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport React, { useMemo } from 'react';\nimport { Line } from 'react-chartjs-2';\n\nimport useTimeseries from '../../../hooks/useTimeseries';\nimport formatValue from '../../../util/format';\nimport formatDateTooltips from '../../../util/formatDateTooltips';\nimport hexToRgb from '../../../util/hexToRgb';\nimport { parseTime, timeRangeToLocal } from '../../../util/timezone';\nimport { setChartJSDefaults, setYAxisStepSize } from '../../../util/chartjs/common';\nimport Container from '../../Container';\nimport { Theme } from '../../../../themes/theme';\nimport { useTheme } from '@embeddable.com/react';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  Filler,\n  ChartDataLabels,\n);\n\ntype Props = {\n  title?: string;\n  ds: Dataset;\n  xAxis: Dimension;\n  comparisonXAxis?: Dimension;\n  granularity: Granularity;\n  metrics: Measure[];\n  timeFilter?: TimeRange;\n  prevTimeFilter?: TimeRange;\n  yAxisMin?: number;\n  xAxisTitle?: string;\n  comparisonXAxisTitle?: string;\n  yAxisTitle?: string;\n  applyFill?: boolean;\n  showLabels?: boolean;\n  showLegend?: boolean;\n  results: DataResponse;\n  prevResults: DataResponse;\n  dps?: number;\n};\n\ntype PropsWithRequiredTheme = Props & { theme: Theme };\ntype Record = { [p: string]: string };\n\nexport default (propsInitial: Props) => {\n  const theme: Theme = useTheme() as Theme;\n\n  const props: PropsWithRequiredTheme = useMemo(\n    () => ({ ...propsInitial, theme, granularity: propsInitial.granularity || 'day' }),\n    [propsInitial, theme],\n  );\n\n  setChartJSDefaults(theme, 'line');\n\n  const { fillGaps } = useTimeseries(props, 'desc');\n\n  const chartData: ChartData<'line'> = useMemo(() => {\n    const { results, prevResults, metrics, applyFill } = props;\n\n    const data = results?.data?.reduce(fillGaps, []);\n\n    const prevData = prevResults?.data?.reduce(fillGaps, []);\n\n    const lines: ChartDataset<'line', DefaultDataPoint<'line'>>[] =\n      metrics?.map((yAxis, i) => ({\n        xAxisID: 'period',\n        label: yAxis.title,\n        data:\n          data?.map((d: Record) => ({\n            y: parseFloat(d[yAxis.name] || '0'),\n            x: parseTime(d[props.xAxis?.name || '']),\n          })) || [],\n        backgroundColor: applyFill\n          ? hexToRgb(theme.charts.colors[i % theme.charts.colors.length], 0.2)\n          : theme.charts.colors[i % theme.charts.colors.length],\n        borderColor: theme.charts.colors[i % theme.charts.colors.length],\n        pointRadius: 0,\n        tension: theme.charts.line.lineTension,\n        pointHoverRadius: 3,\n        fill: applyFill,\n        cubicInterpolationMode: theme.charts.line.cubicInterpolationMode,\n      })) || [];\n\n    const datasets = [\n      ...lines,\n      ...lines.map((_, i) => {\n        const c = hexToRgb(theme.charts.colors[i % theme.charts.colors.length], 0.5);\n\n        const update: ChartDataset<'line', DefaultDataPoint<'line'>> = {\n          cubicInterpolationMode: theme.charts.bar.cubicInterpolationMode,\n          showLine: !!props.prevTimeFilter,\n          xAxisID: 'comparison',\n          label: `Previous ${metrics[i].title}`,\n          data: props.prevTimeFilter\n            ? prevData?.map((d: Record) => ({\n                y: parseFloat(d[metrics[i].name] || '0'),\n                x: parseTime(d[props.comparisonXAxis?.name || props.xAxis.name || '']),\n              })) || []\n            : [],\n          backgroundColor: applyFill\n            ? hexToRgb(theme.charts.colors[i % theme.charts.colors.length], 0.05)\n            : c,\n          borderColor: c,\n          pointRadius: 0,\n          tension: theme.charts.line.lineTension,\n          pointHoverRadius: 3,\n          fill: applyFill && !!props.prevTimeFilter,\n          segment: {\n            borderDash: [10, 5],\n          },\n        };\n\n        return update;\n      }),\n    ];\n\n    return {\n      datasets,\n    };\n  }, [props, fillGaps, theme]);\n\n  const chartOptions: ChartOptions<'line'> = useMemo(() => {\n    const bounds = {\n      period: timeRangeToLocal(props.timeFilter),\n      comparison: timeRangeToLocal(props.prevTimeFilter),\n    };\n\n    return {\n      responsive: true,\n      maintainAspectRatio: false,\n      interaction: {\n        mode: 'index',\n        intersect: false,\n      },\n      layout: {\n        padding: {\n          left: 0,\n          right: 0,\n          top: props.showLabels ? 20 : 0, // Added so the highest data labels fits\n          bottom: 0,\n        },\n      },\n      scales: {\n        y: {\n          min: props.yAxisMin,\n          grace: '0%', // Add percent to add numbers on the y-axis above and below the max and min values\n          grid: {\n            display: false,\n          },\n          title: {\n            display: !!props.yAxisTitle,\n            text: props.yAxisTitle,\n          },\n          callback: function (value: number) {\n            return formatValue(value.toString(), { type: 'number' });\n          },\n          afterDataLimits: function (axis) {\n            //Disable fractions unless they exist in the data.\n            setYAxisStepSize(axis, props.results, [...props.metrics], props.dps);\n          },\n        },\n        period: {\n          min: bounds.period?.from?.toJSON(),\n          max: bounds.period?.to?.toJSON(),\n          grid: {\n            display: false,\n          },\n          type: 'time',\n          time: {\n            round: props.granularity,\n            isoWeekday: true,\n            displayFormats: theme.dateFormats,\n            unit: props.granularity,\n          },\n          title: {\n            display: !!props.xAxisTitle,\n            text: props.xAxisTitle,\n          },\n        },\n        comparison: {\n          min: bounds.comparison?.from?.toJSON(),\n          max: bounds.comparison?.to?.toJSON(),\n          display: !!props.comparisonXAxis,\n          grid: {\n            display: false,\n          },\n          type: 'time',\n          time: {\n            round: props.granularity,\n            isoWeekday: true,\n            displayFormats: theme.dateFormats,\n            unit: props.granularity,\n          },\n          title: {\n            display: !!props.comparisonXAxisTitle,\n            text: props.comparisonXAxisTitle,\n          },\n        },\n      },\n      animation: {\n        duration: 400,\n        easing: 'linear',\n      },\n      plugins: {\n        legend: {\n          display: props.showLegend,\n          position: 'bottom',\n          labels: {\n            usePointStyle: true,\n            boxHeight: 8,\n          },\n        },\n        tooltip: {\n          callbacks: {\n            title: (lines: any[]) => formatDateTooltips(lines, props.granularity, theme),\n            label: function (context) {\n              //metric needed for formatting\n              const metricIndex = context.datasetIndex % props.metrics.length;\n              const metricObj = props.metrics[metricIndex];\n              let label = context.dataset.label || '';\n              if (context.parsed.y !== null) {\n                label += `: ${formatValue(`${context.parsed['y']}`, {\n                  type: 'number',\n                  dps: props.dps,\n                  meta: metricObj?.meta,\n                })}`;\n              }\n              return label;\n            },\n          },\n        },\n        datalabels: {\n          align: 'top',\n          display: props.showLabels ? 'auto' : false,\n          backgroundColor: theme.charts.line.labels.backgroundColor,\n          borderRadius: theme.charts.line.labels.borderRadius,\n          color: theme.charts.line.labels.color,\n          font: {\n            size: theme.charts.line.labels.font.size,\n            weight: theme.charts.line.labels.font.weight,\n          },\n          formatter: (v, context) => {\n            //get metrics index including for comparison datasets\n            const metricIndex = context.datasetIndex % props.metrics.length;\n            const metric = props.metrics[metricIndex];\n            const val = v\n              ? formatValue(v.y, {\n                  type: 'number',\n                  dps: props.dps,\n                  meta: metric?.meta,\n                })\n              : null;\n            return val;\n          },\n        },\n      },\n    };\n  }, [props]);\n\n  return (\n    <Container {...props} className=\"overflow-y-hidden\">\n      <Line height=\"100%\" options={chartOptions} data={chartData} />\n    </Container>\n  );\n};\n"],"names":["inputs","orderProp","_b","loadData","_a","CompareLineChart_emb","defineComponent","Component","meta","jsx","Container","props","Line","chartOptions","chartData","metric","v","formatValue","metricIndex","context","theme","label","metricObj","lines","formatDateTooltips","_h","_g","bounds","_f","_e","_d","_c","setYAxisStepSize","j","axis","value","timeRangeToLocal","fillGaps","useMemo","applyFill","c","hexToRgb","i","parseTime","d","metrics","prevData","_","n","yAxis","data","results","prevResults","useTimeseries","setChartJSDefaults","O","propsInitial","x","useTheme","Filler","ChartDataLabels","Legend","Tooltip","Title","N","LineElement","M","PointElement","I","LinearScale","k","CategoryScale","P","ChartJS"],"mappings":"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"}