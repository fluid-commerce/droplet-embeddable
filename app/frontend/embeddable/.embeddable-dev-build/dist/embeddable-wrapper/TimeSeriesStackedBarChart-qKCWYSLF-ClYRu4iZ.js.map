{"version":3,"file":"TimeSeriesStackedBarChart-qKCWYSLF-ClYRu4iZ.js","sources":["../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/charts/StackedBarChart/TimeSeriesStackedBarChart.emb.ts"],"sourcesContent":["import { loadData } from '@embeddable.com/core';\nimport { EmbeddedComponentMeta, Inputs, defineComponent } from '@embeddable.com/react';\n\nimport Component from './index';\n\nexport const meta = {\n  name: 'TimeSeriesStackedBarChart',\n  label: 'Grouped bar chart (time-series)',\n  category: 'Charts: time-series',\n  classNames: ['inside-card'],\n  inputs: [\n    {\n      name: 'ds',\n      type: 'dataset',\n      label: 'Dataset to display',\n      category: 'Chart data',\n    },\n    {\n      name: 'xAxis',\n      type: 'dimension',\n      label: 'X-Axis',\n      config: {\n        dataset: 'ds',\n        supportedTypes: ['time'],\n        hideGranularity: true,\n      },\n      category: 'Chart data',\n    },\n    {\n      name: 'granularity',\n      type: 'granularity',\n      label: 'Granularity',\n      defaultValue: 'week',\n      category: 'Variables to configure',\n    },\n    {\n      name: 'segment',\n      type: 'dimension',\n      label: 'Grouping',\n      config: {\n        dataset: 'ds',\n        hideGranularity: true,\n      },\n      category: 'Chart data',\n    },\n    {\n      name: 'metric',\n      type: 'measure',\n      label: 'Metric',\n      config: {\n        dataset: 'ds',\n      },\n      category: 'Chart data',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      label: 'Title',\n      description: 'The title for the chart',\n      category: 'Chart settings',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      label: 'Description',\n      description: 'The description for the chart',\n      category: 'Chart settings',\n    },\n    {\n      name: 'stackBars',\n      type: 'boolean',\n      label: 'Stack bars',\n      defaultValue: true,\n      category: 'Chart settings',\n    },\n    {\n      name: 'showLegend',\n      type: 'boolean',\n      label: 'Show legend',\n      defaultValue: true,\n      category: 'Chart settings',\n    },\n    {\n      name: 'maxSegments',\n      type: 'number',\n      label: 'Max Legend Items',\n      defaultValue: 8,\n      category: 'Chart settings',\n    },\n    {\n      name: 'showLabels',\n      type: 'boolean',\n      label: 'Show Labels',\n      defaultValue: false,\n      category: 'Chart settings',\n    },\n    {\n      name: 'showTotals',\n      type: 'boolean',\n      label: 'Show Totals Above Stacked Bars',\n      defaultValue: false,\n      category: 'Chart settings',\n    },\n    {\n      name: 'displayHorizontally',\n      type: 'boolean',\n      label: 'Display Horizontally',\n      category: 'Chart settings',\n      defaultValue: false,\n    },\n    {\n      name: 'displayAsPercentage',\n      type: 'boolean',\n      label: 'Display as Percentages',\n      defaultValue: false,\n      category: 'Chart settings',\n    },\n    {\n      name: 'dps',\n      type: 'number',\n      label: 'Decimal Places',\n      category: 'Formatting',\n    },\n    {\n      name: 'enableDownloadAsCSV',\n      type: 'boolean',\n      label: 'Show download as CSV',\n      category: 'Export options',\n      defaultValue: true,\n    },\n    {\n      name: 'enableDownloadAsPNG',\n      type: 'boolean',\n      label: 'Show download as PNG',\n      category: 'Export options',\n      defaultValue: true,\n    },\n  ],\n} as const satisfies EmbeddedComponentMeta;\n\nexport default defineComponent(Component, meta, {\n  props: (inputs: Inputs<typeof meta>) => {\n    return {\n      ...inputs,\n      isGroupedBar: true,\n      isTSGroupedBarChart: true,\n      reverseXAxis: true,\n      results: loadData({\n        from: inputs.ds,\n        select: [\n          {\n            dimension: inputs.xAxis?.name,\n            granularity: inputs.granularity,\n          },\n          inputs.segment,\n          inputs.metric,\n        ],\n        orderBy: [\n          {\n            property: inputs.xAxis,\n            direction: 'desc',\n          },\n        ],\n      }),\n    };\n  },\n});\n"],"names":["inputs","_a","loadData","TimeSeriesStackedBarChart_emb","defineComponent","Component","meta"],"mappings":";;;;;;;;;;;;;;;AAKA,MAAaM,CAAb,GAAoB;AAAA,EAClB,IADF,EACQ,2BADR;AACQ,EACN,KAFF,EAES,iCAFT;AAES,EACP,QAFF,EAEY,qBAFZ;AAEY,EACV,UAFF,EAEc,CAAC,aAAa,CAF5B;AAE4B,EAC1B,MAFF,EAEU;AAAA,IACN;AAAA,MACE,IAFN,EAEY,IAFZ;AAEY,MACN,IAFN,EAEY,SAFZ;AAEY,MACN,KAFN,EAEa,oBAFb;AAEa,MACP,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,OAHZ;AAGY,MACN,IAFN,EAEY,WAFZ;AAEY,MACN,KAFN,EAEa,QAFb;AAEa,MACP,MAFN,EAEc;AAAA,QACN,OAFR,EAEiB,IAFjB;AAEiB,QACT,cAFR,EAEwB,CAAC,MAAM,CAF/B;AAE+B,QACvB,eAFR,EAEyB;AAAA,OADzB;AACyB,MAEnB,QAFN,EAEgB;AAAA,KAFhB;AAEgB,IAEZ;AAAA,MACE,IAHN,EAGY,aAHZ;AAGY,MACN,IAFN,EAEY,aAFZ;AAEY,MACN,KAFN,EAEa,aAFb;AAEa,MACP,YAFN,EAEoB,MAFpB;AAEoB,MACd,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,SAHZ;AAGY,MACN,IAFN,EAEY,WAFZ;AAEY,MACN,KAFN,EAEa,UAFb;AAEa,MACP,MAFN,EAEc;AAAA,QACN,OAFR,EAEiB,IAFjB;AAEiB,QACT,eAFR,EAEyB;AAAA,OADzB;AACyB,MAEnB,QAFN,EAEgB;AAAA,KAFhB;AAEgB,IAEZ;AAAA,MACE,IAHN,EAGY,QAHZ;AAGY,MACN,IAFN,EAEY,SAFZ;AAEY,MACN,KAFN,EAEa,QAFb;AAEa,MACP,MAFN,EAEc;AAAA,QACN,OAFR,EAEiB;AAAA,OADjB;AACiB,MAEX,QAFN,EAEgB;AAAA,KAFhB;AAEgB,IAEZ;AAAA,MACE,IAHN,EAGY,OAHZ;AAGY,MACN,IAFN,EAEY,QAFZ;AAEY,MACN,KAFN,EAEa,OAFb;AAEa,MACP,WAFN,EAEmB,yBAFnB;AAEmB,MACb,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,aAHZ;AAGY,MACN,IAFN,EAEY,QAFZ;AAEY,MACN,KAFN,EAEa,aAFb;AAEa,MACP,WAFN,EAEmB,+BAFnB;AAEmB,MACb,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,WAHZ;AAGY,MACN,IAFN,EAEY,SAFZ;AAEY,MACN,KAFN,EAEa,YAFb;AAEa,MACP,YAFN,EAEoB,IAFpB;AAEoB,MACd,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,YAHZ;AAGY,MACN,IAFN,EAEY,SAFZ;AAEY,MACN,KAFN,EAEa,aAFb;AAEa,MACP,YAFN,EAEoB,IAFpB;AAEoB,MACd,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,aAHZ;AAGY,MACN,IAFN,EAEY,QAFZ;AAEY,MACN,KAFN,EAEa,kBAFb;AAEa,MACP,YAFN,EAEoB,CAFpB;AAEoB,MACd,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,YAHZ;AAGY,MACN,IAFN,EAEY,SAFZ;AAEY,MACN,KAFN,EAEa,aAFb;AAEa,MACP,YAFN,EAEoB,KAFpB;AAEoB,MACd,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,YAHZ;AAGY,MACN,IAFN,EAEY,SAFZ;AAEY,MACN,KAFN,EAEa,gCAFb;AAEa,MACP,YAFN,EAEoB,KAFpB;AAEoB,MACd,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,qBAHZ;AAGY,MACN,IAFN,EAEY,SAFZ;AAEY,MACN,KAFN,EAEa,sBAFb;AAEa,MACP,QAFN,EAEgB,gBAFhB;AAEgB,MACV,YAFN,EAEoB;AAAA,KADpB;AACoB,IAEhB;AAAA,MACE,IAHN,EAGY,qBAHZ;AAGY,MACN,IAFN,EAEY,SAFZ;AAEY,MACN,KAFN,EAEa,wBAFb;AAEa,MACP,YAFN,EAEoB,KAFpB;AAEoB,MACd,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,KAHZ;AAGY,MACN,IAFN,EAEY,QAFZ;AAEY,MACN,KAFN,EAEa,gBAFb;AAEa,MACP,QAFN,EAEgB;AAAA,KADhB;AACgB,IAEZ;AAAA,MACE,IAHN,EAGY,qBAHZ;AAGY,MACN,IAFN,EAEY,SAFZ;AAEY,MACN,KAFN,EAEa,sBAFb;AAEa,MACP,QAFN,EAEgB,gBAFhB;AAEgB,MACV,YAFN,EAEoB;AAAA,KADpB;AACoB,IAEhB;AAAA,MACE,IAHN,EAGY,qBAHZ;AAGY,MACN,IAFN,EAEY,SAFZ;AAEY,MACN,KAFN,EAEa,sBAFb;AAEa,MACP,QAFN,EAEgB,gBAFhB;AAEgB,MACV,YAFN,EAEoB;AAAA;AAAA;AAGpB,CAAA,CAAA,CAEAH,CAFA,GAEeC,eAFf,CAE+BC,CAF/B,EAE0CC,CAF1C,EAEgD;AAAA,EAC9C,KAHF,EAGS,CAACN,CAHV,KAG0C;;AAC1C,IAAA,OAAW;AAAA,MACL,GAAGA,CADT;AACSA,MACH,YAFN,EAEoB,IAFpB;AAEoB,MACd,mBAFN,EAE2B,IAF3B;AAE2B,MACrB,YAFN,EAEoB,IAFpB;AAEoB,MACd,OAFN,EAEeE,CAFf,CAEwB;AAAA,QAChB,IAFR,EAEcF,CAFd,CAEqB,EAFrB;AAEqB,QACb,MAFR,EAEgB;AAAA,UACN;AAAA,YACE,SAFZ,EAAA,CAEuBC,CAFvB,GAEuBD,CAFvB,CAE8B,KAF9B,KAEuB,IAFvB,GACA,KADA,CAAA,GAEuBC,CAFvB,CAEqC,IAFrC;AAEqC,YACzB,WAFZ,EAEyBD,CAFzB,CAEgC;AAAA,WADhC;AACgC,UAEtBA,CAFV,CAEiB,OAFjB;AAEiB,UACPA,CAHV,CAGiB;AAAA,SADjB;AACiB,QAET,OAFR,EAEiB;AAAA,UACP;AAAA,YACE,QAFZ,EAEsBA,CAFtB,CAE6B,KAF7B;AAE6B,YACjB,SAFZ,EAEuB;AAAA;AAAA;AAAA,OAGhB;AAAA,KAFP;AAEO;AAGP,CAAC;;;;"}