{"version":3,"file":"MultiSelectorDimensionOrMeasure-Bi-RT01P-gV7iJDgg.js","sources":["../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/controls/MultiSelectorDimensionOrMeasure/MultiSelectorDimensionOrMeasure.emb.ts","../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/controls/MultiSelectorDimensionOrMeasure/index.tsx"],"sourcesContent":["import { Value } from '@embeddable.com/core';\nimport { EmbeddedComponentMeta, Inputs, defineComponent } from '@embeddable.com/react';\n\nimport Component, { Props } from './index';\nimport { selectorOptionIncludesSearch } from '../Selector.utils';\n\nexport const meta = {\n  name: 'MultiSelectorDimensionOrMeasure',\n  label: 'Dimensions and measures multi-select',\n  defaultWidth: 300,\n  defaultHeight: 80,\n  classNames: ['on-top'],\n  category: 'Controls: measures and dimensions',\n  inputs: [\n    {\n      name: 'ds',\n      type: 'dataset',\n      label: 'Dataset',\n      description: 'Dataset',\n      category: 'Dropdown values',\n    },\n    {\n      name: 'options',\n      array: true,\n      type: 'dimensionOrMeasure',\n      label: 'Choices',\n      config: {\n        dataset: 'ds',\n      },\n      category: 'Dropdown values',\n      inputs: [\n        {\n          name: 'overrideName',\n          type: 'string',\n          label: 'Override name',\n          description: 'Overrides the default name shown',\n        },\n      ],\n    },\n    {\n      name: 'defaultValue',\n      type: 'dimensionOrMeasure',\n      array: true,\n      label: 'Default value',\n      category: 'Pre-configured variables',\n      config: {\n        dataset: 'ds',\n      },\n    },\n    {\n      name: 'title',\n      type: 'string',\n      label: 'Title',\n      category: 'Settings',\n    },\n\n    {\n      name: 'allowNoValue',\n      type: 'boolean',\n      label: 'Allow no value',\n      category: 'Settings',\n      defaultValue: false,\n    },\n  ],\n  events: [\n    {\n      name: 'onChange',\n      label: 'Change',\n      properties: [\n        {\n          name: 'value',\n          type: 'dimensionOrMeasure',\n          array: true,\n        },\n      ],\n    },\n  ],\n  variables: [\n    {\n      name: 'Dimension or measure multi choice',\n      type: 'dimensionOrMeasure',\n      array: true,\n      inputs: ['defaultValue'],\n      events: [{ name: 'onChange', property: 'value' }],\n    },\n  ],\n} as const satisfies EmbeddedComponentMeta;\n\nexport default defineComponent<Props, typeof meta, { search: string }>(Component, meta, {\n  props: (inputs: Inputs<typeof meta>, [embState]) => {\n    if (!inputs.ds)\n      return {\n        ...inputs,\n        options: [] as never,\n      };\n\n    return {\n      ...inputs,\n      options: inputs.options || [],\n    };\n  },\n  events: {\n    onChange: (value) => {\n      return {\n        value: value || Value.noFilter(),\n      };\n    },\n  },\n});\n","import { DimensionOrMeasure } from '@embeddable.com/core';\nimport React from 'react';\n\nimport MultiSelector from '../MultiSelector';\nimport { getMultiSelectorDefaultValue, getSelectorOptions } from '../Selector.utils';\n\nexport type Props = {\n  allowNoValue?: boolean;\n  defaultValue?: DimensionOrMeasure[];\n  options: DimensionOrMeasure[];\n  title?: string;\n  onChange: (v: DimensionOrMeasure[]) => void;\n};\n\nexport default (props: Props) => {\n  const handleChange = (newValues: string[]) => {\n    const newSelection = props.options.filter((option) => newValues.includes(option.name));\n    props.onChange(newSelection);\n  };\n\n  return (\n    <MultiSelector\n      title={props.title}\n      options={getSelectorOptions(props.options)}\n      defaultValue={getMultiSelectorDefaultValue(props.defaultValue, props.options)}\n      unclearable={!props.allowNoValue}\n      onChange={handleChange}\n    />\n  );\n};\n"],"names":["value","Value","inputs","embState","MultiSelectorDimensionOrMeasure_emb","defineComponent","Component","meta","handleChange","props","getMultiSelectorDefaultValue","getSelectorOptions","MultiSelector","jsx","newSelection","option","newValues"],"mappings":"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"}