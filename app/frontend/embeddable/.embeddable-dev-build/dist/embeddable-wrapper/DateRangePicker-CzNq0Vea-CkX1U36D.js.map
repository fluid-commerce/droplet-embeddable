{"version":3,"file":"DateRangePicker-CzNq0Vea-CkX1U36D.js","sources":["../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/controls/DatePicker/DateRangePicker.emb.ts","../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/controls/DatePicker/index.tsx"],"sourcesContent":["import { Granularity, TimeRange, Value } from '@embeddable.com/core';\nimport { EmbeddedComponentMeta, Inputs, defineComponent } from '@embeddable.com/react';\nimport { endOfDay, startOfDay } from 'date-fns';\n\nimport { timeRangeToUTC } from '../../../util/timezone';\nimport Component from './index';\n\nexport const meta = {\n  name: 'DateRangePicker',\n  label: 'Date range picker',\n  defaultWidth: 300,\n  defaultHeight: 50,\n  classNames: ['on-top'],\n  category: 'Controls: inputs & dropdowns',\n  inputs: [\n    {\n      name: 'title',\n      type: 'string',\n      label: 'Title',\n      category: 'Settings',\n    },\n    {\n      name: 'showGranularity',\n      type: 'boolean',\n      label: 'Show granularity picker',\n      category: 'Settings',\n      defaultValue: false,\n    },\n    {\n      name: 'value',\n      type: 'timeRange',\n      label: 'Primary date range',\n      category: 'Pre-configured variables',\n    },\n    {\n      name: 'defaultGranularity',\n      type: 'granularity',\n      label: 'Default granularity',\n      category: 'Pre-configured variables',\n    },\n  ],\n  events: [\n    {\n      name: 'onChange',\n      label: 'Change Period',\n      properties: [\n        {\n          name: 'value',\n          type: 'timeRange',\n          label: 'value',\n        },\n      ],\n    },\n    {\n      name: 'onChangeGranularity',\n      label: 'Change Granularity',\n      properties: [\n        {\n          name: 'value',\n          type: 'granularity',\n          label: 'value',\n        },\n      ],\n    },\n  ],\n  variables: [\n    {\n      name: 'date range value',\n      type: 'timeRange',\n      inputs: ['value'],\n      defaultValue: { relativeTimeString: 'Last 30 days' },\n      events: [{ name: 'onChange', property: 'value' }],\n    },\n    {\n      name: 'granularity',\n      type: 'granularity',\n      inputs: ['defaultGranularity'],\n      defaultValue: 'day',\n      events: [{ name: 'onChangeGranularity', property: 'value' }],\n    },\n  ],\n} as const satisfies EmbeddedComponentMeta;\n\nexport default defineComponent(Component, meta, {\n  /* @ts-expect-error - to be fixed in @embeddable.com/react */\n  props: (inputs: Inputs<typeof meta>) => {\n    return {\n      ...inputs,\n    };\n  },\n  events: {\n    onChange: (v) => {\n      if (!v) return { value: Value.noFilter() };\n\n      const value = timeRangeToUTC({ ...v, from: startOfDay(v.from), to: endOfDay(v.to) });\n\n      return { value: value };\n    },\n    onChangeGranularity: (value) => {\n      return { value: value || Value.noFilter() };\n    },\n  },\n});\n","import { Granularity, TimeRange } from '@embeddable.com/core';\nimport React from 'react';\n\nimport Container from '../../Container';\nimport DateRangeWithGranularity from './components/DateRangeWithGranularity';\n\nexport type Props = {\n  defaultPeriod?: TimeRange;\n  defaultGranularity?: Granularity;\n  showGranularity?: boolean;\n  onChange: (v: TimeRange | null) => void;\n  onChangeComparison: (v: TimeRange | null) => void;\n  onChangePeriod: (v: TimeRange | null) => void;\n  onChangeGranularity: (v: Granularity | null) => void;\n  value: TimeRange;\n};\n\nexport default (props: Props) => {\n  return (\n    <Container {...props}>\n      <DateRangeWithGranularity\n        defaultPeriod={props.value}\n        defaultGranularity={props.defaultGranularity}\n        showGranularity={props.showGranularity}\n        onChangePeriod={props.onChange}\n        onChangeGranularity={props.onChangeGranularity}\n        onChangeComparison={props.onChangeComparison}\n      />\n    </Container>\n  );\n};\n"],"names":["value","Value","v","timeRangeToUTC","startOfDay","endOfDay","inputs","DateRangePicker_emb","defineComponent","Component","meta","props","DateRangeWithGranularity","jsx","Container"],"mappings":"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"}