{"version":3,"file":"TextInput-VzSdMh7Y-DD_WeMKk.js","sources":["../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/controls/TextInput/TextInput.emb.ts","../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/controls/TextInput/index.tsx"],"sourcesContent":["import { Value } from '@embeddable.com/core';\nimport { EmbeddedComponentMeta, Inputs, defineComponent } from '@embeddable.com/react';\n\nimport Component from './index';\n\nexport const meta = {\n  name: 'TextInput',\n  label: 'Text input',\n  defaultWidth: 300,\n  defaultHeight: 80,\n  category: 'Controls: inputs & dropdowns',\n  inputs: [\n    {\n      name: 'title',\n      type: 'string',\n      label: 'Title',\n      description: 'The title',\n      category: 'Settings'\n    },\n    {\n      name: 'value',\n      type: 'string',\n      label: 'Initial value',\n      category: 'Pre-configured variables'\n    },\n    {\n      name: 'placeholder',\n      type: 'string',\n      label: 'Placeholder',\n      category: 'Settings'\n    }\n  ],\n  events: [\n    {\n      name: 'onChange',\n      label: 'Change',\n      properties: [\n        {\n          name: 'value',\n          type: 'string'\n        }\n      ]\n    }\n  ],\n  variables: [\n    {\n      name: 'Text Value',\n      type: 'string',\n      defaultValue: Value.noFilter(),\n      inputs: ['value'],\n      events: [{ name: 'onChange', property: 'value' }]\n    }\n  ]\n} as const satisfies EmbeddedComponentMeta;\n\nexport default defineComponent(Component, meta, {\n  props: (inputs: Inputs<typeof meta>) => ({\n    ...inputs\n  }),\n  events: {\n    onChange: (value) => {\n      return { value: value || Value.noFilter() };\n    }\n  }\n});","import React, { useEffect, useRef, useState } from 'react';\n\nimport Container from '../../Container';\nimport { ClearIcon } from '../../icons';\nimport { Theme } from '../../../../themes/theme';\nimport { useTheme } from '@embeddable.com/react';\n\ntype Props = {\n  onChange: (v: string) => void;\n  title?: string;\n  value?: string;\n  placeholder: string;\n};\n\nlet timeout: number | null = null;\n\nexport default (props: Props) => {\n  const ref = useRef<HTMLInputElement | null>(null);\n  const [value, setValue] = useState(props.value);\n\n  const theme: Theme = useTheme() as Theme;\n\n  useEffect(() => {\n    setValue(props.value);\n  }, [props.value]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(e.target.value);\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = window.setTimeout(() => {\n      props.onChange(e.target.value);\n    }, 1000);\n  };\n\n  return (\n    <Container title={props.title}>\n      <div\n        className={`\n          border\n          h-10\n          pr-8\n          relative\n          w-full\n          bg-[color:--embeddable-controls-backgrounds-colors-soft]\n          border-[color:--embeddable-controls-borders-colors-normal]\n          rounded-[--embeddable-controls-borders-radius]\n        `}\n      >\n        <input\n          ref={ref}\n          placeholder={props.placeholder}\n          className={`\n            border-0\n            h-full\n            leading-10\n            outline-none\n            px-3\n            w-full\n            bg-[color:--embeddable-controls-backgrounds-colors-transparent]\n            rounded-[--embeddable-controls-borders-radius]\n          `}\n          onChange={handleChange}\n          defaultValue={value}\n        />\n        {!!value && (\n          <div\n            onClick={() => {\n              setValue('');\n              props.onChange('');\n              ref.current!.value = '';\n              ref.current?.focus();\n            }}\n            className=\"opacity-50 hover:opacity-100 absolute w-10 right-0 top-0 h-full cursor-pointer group flex items-center justify-center\"\n          >\n            <ClearIcon />\n          </div>\n        )}\n      </div>\n    </Container>\n  );\n};\n"],"names":["value","Value","inputs","TextInput_emb","defineComponent","Component","meta","ClearIcon","setValue","props","ref","_a","jsx","handleChange","jsxs","Container","e","timeout","useTheme","i","useEffect","useRef","useState"],"mappings":"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"}