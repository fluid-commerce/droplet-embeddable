{"version":3,"file":"KPIChart-Dh0rn1bt-tt_uJ8rO.js","sources":["../../../node_modules/@embeddable.com/vanilla-components/src/components/vanilla/charts/KPIChart/KPIChart.emb.ts"],"sourcesContent":["import { loadData } from '@embeddable.com/core';\nimport { EmbeddedComponentMeta, Inputs, defineComponent } from '@embeddable.com/react';\n\nimport Component from './index';\n\nexport const meta = {\n  name: 'KPIChart',\n  label: 'KPI number comparison',\n  defaultWidth: 200,\n  defaultHeight: 150,\n  classNames: ['inside-card'],\n  category: 'Charts: time-series comparison',\n  inputs: [\n    {\n      name: 'ds',\n      type: 'dataset',\n      label: 'Dataset',\n      description: 'Dataset',\n      defaultValue: false,\n      category: 'Chart data',\n    },\n    {\n      name: 'metric',\n      type: 'measure',\n      label: 'KPI',\n      required: true,\n      config: {\n        dataset: 'ds',\n      },\n      category: 'Chart data',\n    },\n    {\n      name: 'timeProperty',\n      type: 'dimension',\n      label: 'Time Property',\n      description: 'Used by time filters',\n      config: {\n        dataset: 'ds',\n        supportedTypes: ['time'],\n      },\n      category: 'Chart data',\n    },\n    {\n      name: 'timeFilter',\n      type: 'timeRange',\n      label: 'Primary date range',\n      description: 'Date range',\n      category: 'Variables to configure',\n    },\n    {\n      name: 'prevTimeFilter',\n      type: 'timeRange',\n      label: 'Comparison date range',\n      description: 'Date range',\n      category: 'Variables to configure',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      label: 'Title',\n      description: 'The title for the chart',\n      category: 'Chart settings',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      label: 'Description',\n      description: 'The description for the chart',\n      category: 'Chart settings',\n    },\n    {\n      name: 'showPrevPeriodLabel',\n      type: 'boolean',\n      label: 'Display comparison period label',\n      defaultValue: true,\n      category: 'Chart settings',\n    },\n    {\n      name: 'prefix',\n      type: 'string',\n      label: 'Prefix',\n      description: 'Prefix',\n      category: 'Chart settings',\n    },\n    {\n      name: 'suffix',\n      type: 'string',\n      label: 'Suffix',\n      description: 'Suffix',\n      category: 'Chart settings',\n    },\n    {\n      name: 'dps',\n      type: 'number',\n      label: 'Decimal Places',\n      category: 'Formatting',\n    },\n    {\n      name: 'fontSize',\n      type: 'number',\n      label: 'Text size in pixels',\n      defaultValue: 44,\n      category: 'Formatting',\n    },\n    {\n      name: 'enableDownloadAsCSV',\n      type: 'boolean',\n      label: 'Show download as CSV',\n      category: 'Export options',\n      defaultValue: false,\n    },\n    {\n      name: 'enableDownloadAsPNG',\n      type: 'boolean',\n      label: 'Show download as PNG',\n      category: 'Export options',\n      defaultValue: false,\n    },\n  ],\n} as const satisfies EmbeddedComponentMeta;\n\nexport default defineComponent(Component, meta, {\n  props: (inputs: Inputs<typeof meta>) => {\n    return {\n      ...inputs,\n      results: loadData({\n        from: inputs.ds,\n        select: [inputs.metric],\n        filters:\n          inputs.timeFilter?.from && inputs.timeProperty\n            ? [\n                {\n                  property: inputs.timeProperty,\n                  operator: 'inDateRange',\n                  value: inputs.timeFilter,\n                },\n              ]\n            : undefined,\n      }),\n      prevResults:\n        inputs.timeProperty &&\n        loadData({\n          from: inputs.ds,\n          select: [inputs.metric],\n          limit: !inputs.prevTimeFilter?.from ? 1 : undefined,\n          filters: inputs.prevTimeFilter?.from\n            ? [\n                {\n                  property: inputs.timeProperty,\n                  operator: 'inDateRange',\n                  value: {\n                    from: inputs.prevTimeFilter.from,\n                    relativeTimeString: '',\n                    to: inputs.prevTimeFilter.to,\n                  },\n                },\n              ]\n            : undefined,\n        }),\n    };\n  },\n});\n"],"names":["inputs","_c","_b","loadData","_a","KPIChart_emb","defineComponent","Component","meta"],"mappings":"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"}